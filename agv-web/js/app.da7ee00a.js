(function(t){function e(e){for(var i,s,c=e[0],r=e[1],l=e[2],v=0,d=[];v<c.length;v++)s=c[v],Object.prototype.hasOwnProperty.call(a,s)&&a[s]&&d.push(a[s][0]),a[s]=0;for(i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i]);u&&u(e);while(d.length)d.shift()();return o.push.apply(o,l||[]),n()}function n(){for(var t,e=0;e<o.length;e++){for(var n=o[e],i=!0,c=1;c<n.length;c++){var r=n[c];0!==a[r]&&(i=!1)}i&&(o.splice(e--,1),t=s(s.s=n[0]))}return t}var i={},a={app:0},o=[];function s(e){if(i[e])return i[e].exports;var n=i[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=t,s.c=i,s.d=function(t,e,n){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)s.d(n,i,function(e){return t[e]}.bind(null,i));return n},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],r=c.push.bind(c);c.push=e,c=c.slice();for(var l=0;l<c.length;l++)e(c[l]);var u=r;o.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"010d":function(t,e,n){"use strict";var i=n("798d"),a=n.n(i);a.a},"04c0":function(t,e,n){},"094b":function(t,e,n){"use strict";var i=n("a47d"),a=n.n(i);a.a},1437:function(t,e,n){t.exports=n.p+"img/car.ac6e062e.png"},"1a41":function(t,e,n){},"1c78":function(t,e,n){},"1e01":function(t,e,n){"use strict";var i=n("d95c"),a=n.n(i);a.a},"1e1e":function(t,e,n){},2271:function(t,e,n){},3966:function(t,e,n){t.exports=n.p+"img/1.b86deea9.jpg"},"3d15":function(t,e,n){"use strict";var i=n("1c78"),a=n.n(i);a.a},4456:function(t,e,n){t.exports=n.p+"img/6.5c407d14.jpg"},"44e8":function(t,e,n){t.exports=n.p+"img/5.cbfa247f.jpg"},"457c":function(t,e,n){"use strict";var i=n("1a41"),a=n.n(i);a.a},"4cf8":function(t,e,n){"use strict";var i=n("8003"),a=n.n(i);a.a},"56a8":function(t,e,n){"use strict";var i=n("2271"),a=n.n(i);a.a},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var i=n("2b0e"),a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("router-view")},o=[],s={name:"App"},c=s,r=n("2877"),l=Object(r["a"])(c,a,o,!1,null,null,null),u=l.exports,v=n("8c4f"),d=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("router-view")},h=[],p={name:"AGV-DASHBOARD-LAYOUT"},g=p,m=Object(r["a"])(g,d,h,!1,null,null,null),f=m.exports,b=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-app",[n("v-main",[n("router-view")],1)],1)},y=[],k={name:"LOGIN-LAYOUT"},w=k,x=n("6544"),M=n.n(x),j=n("7496"),S=n("f6c4"),I=Object(r["a"])(w,b,y,!1,null,null,null),C=I.exports;M()(I,{VApp:j["a"],VMain:S["a"]});var O=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-app",[n("AppBar"),n("NavigationMenu"),n("v-main",[n("router-view")],1),n("AppFooter"),n("notifications",{staticClass:"notifications",attrs:{position:"top right",group:"ros"}})],1)},T=[],P=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-app-bar",{attrs:{color:"primary",dark:"",app:"",flat:"",dense:""}},[n("v-app-bar-nav-icon",{on:{click:function(){return t.toggleNavigationMenu(!0)}}}),n("v-toolbar-title",{staticClass:"noselect"},[t._v("AGV ROBOTICS")]),n("v-spacer"),n("v-badge",{staticClass:"mt-2",attrs:{color:t.rosConnectColor,icon:t.rosConnectIcon,overlap:""}},[n("v-icon",{attrs:{large:""},domProps:{textContent:t._s("mdi-robot-mower")}})],1)],1)},A=[],_=(n("7db0"),n("5530")),V=n("2f62"),W=Object(V["a"])("dashboard"),D=W.mapActions,L=Object(V["a"])("navigation"),R=L.mapState,Y=Object(V["a"])("agvs"),E=Y.mapState,X={name:"AppBar",data:function(){return{rosConnectIcon:"mdi-close",rosConnectColor:"red darken-1"}},methods:Object(_["a"])({},D({toggleNavigationMenu:"toggleNavigationMenu"})),computed:Object(_["a"])(Object(_["a"])({},R({navigationAgvId:function(t){return t.agvId}})),E({isRosConnected:function(t){var e=this,n=t.find((function(t){return t.id===e.navigationAgvId}));return null!=n&&n.rosConntectionState}})),mounted:function(){this.isRosConnected?(this.rosConnectIcon="mdi-check",this.rosConnectColor="green darken-1"):(this.rosConnectIcon="mdi-close",this.rosConnectColor="red darken-1")},watch:{isRosConnected:function(t){t?(this.rosConnectIcon="mdi-check",this.rosConnectColor="green darken-1"):(this.rosConnectIcon="mdi-close",this.rosConnectColor="red darken-1")}}},H=X,J=n("40dc"),B=n("5bc1"),z=n("4ca6"),Z=n("132d"),$=n("2fa4"),N=n("2a7f"),U=Object(r["a"])(H,P,A,!1,null,null,null),F=U.exports;M()(U,{VAppBar:J["a"],VAppBarNavIcon:B["a"],VBadge:z["a"],VIcon:Z["a"],VSpacer:$["a"],VToolbarTitle:N["a"]});var G=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-navigation-drawer",{attrs:{absolute:"",temporary:""},model:{value:t.showNavigationMenu,callback:function(e){t.showNavigationMenu=e},expression:"showNavigationMenu"}},[n("v-list",[n("v-list-item",{attrs:{"two-line":""}},[n("v-img",{attrs:{src:"http://prati.com.vn/wp-content/uploads/2018/09/LogoPRATI_Home_En.png"}})],1),n("v-divider"),t._l(t.nanigationMenu,(function(e){return n("v-list-item",{key:e.title,attrs:{link:"",to:e.to}},[n("v-list-item-icon",[n("v-icon",[t._v(t._s(e.icon))])],1),n("v-list-item-content",[n("v-list-item-title",[t._v(t._s(e.title))])],1)],1)}))],2)],1)},q=[],Q=Object(V["a"])("dashboard"),K=Q.mapState,tt=Q.mapActions,et={name:"NavigationMenu",methods:Object(_["a"])({},tt(["toggleNavigationMenu"])),computed:Object(_["a"])(Object(_["a"])({},K({isShowNavigationMenu:function(t){return t.isShowNavigationMenu},nanigationMenu:function(t){return t.navigationMenu}})),{},{showNavigationMenu:{get:function(){return this.isShowNavigationMenu},set:function(t){t!=this.isShowNavigationMenu&&this.toggleNavigationMenu(t)}}})},nt=et,it=n("ce7e"),at=n("adda"),ot=n("8860"),st=n("da13"),ct=n("5d23"),rt=n("34c3"),lt=n("f774"),ut=Object(r["a"])(nt,G,q,!1,null,null,null),vt=ut.exports;M()(ut,{VDivider:it["a"],VIcon:Z["a"],VImg:at["a"],VList:ot["a"],VListItem:st["a"],VListItemContent:ct["a"],VListItemIcon:rt["a"],VListItemTitle:ct["b"],VNavigationDrawer:lt["a"]});var dt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-footer",{attrs:{padless:""}},[n("v-col",{staticClass:"text-center noselect",attrs:{cols:"12"}},[t._v("2020 - ROBOTICS TEAM")])],1)},ht=[],pt={name:"AppFooter"},gt=pt,mt=n("62ad"),ft=n("553a"),bt=Object(r["a"])(gt,dt,ht,!1,null,null,null),yt=bt.exports;M()(bt,{VCol:mt["a"],VFooter:ft["a"]});var kt={name:"DASHBOARD-LAYOUT",components:{AppBar:F,NavigationMenu:vt,AppFooter:yt}},wt=kt,xt=(n("5739"),Object(r["a"])(wt,O,T,!1,null,"0b62d386",null)),Mt=xt.exports;M()(xt,{VApp:j["a"],VMain:S["a"]});var jt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-app",[n("v-main",[n("router-view")],1)],1)},St=[],It={name:"LOGOUT-LAYOUT"},Ct=It,Ot=Object(r["a"])(Ct,jt,St,!1,null,null,null),Tt=Ot.exports;M()(Ot,{VApp:j["a"],VMain:S["a"]});var Pt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-container",{ref:"containerCarousel",staticClass:"fill-height pa-0",attrs:{fluid:""}},[n("v-carousel",{attrs:{height:t.carouselheight+"px"},model:{value:t.imageModel,callback:function(e){t.imageModel=e},expression:"imageModel"}},t._l(t.images,(function(t,e){return n("v-carousel-item",{key:e,staticClass:"carousel-item-image",attrs:{src:t.src,"reverse-transition":"fade-transition",transition:"fade-transition"}})})),1)],1)},At=[],_t={name:"IntroduceView",data:function(){return{imageModel:0,carouselheight:0,images:[{src:n("3966")},{src:n("69fa")},{src:n("c959")},{src:n("a598")},{src:n("44e8")},{src:n("4456")}]}},mounted:function(){this.carouselheight=this.$refs.containerCarousel.offsetHeight,this.$refs.containerCarousel.addEventListener("resize",(function(t){console.log(t)}))}},Vt=_t,Wt=(n("a9bd"),n("5e66")),Dt=n("3e35"),Lt=n("a523"),Rt=Object(r["a"])(Vt,Pt,At,!1,null,null,null),Yt=Rt.exports;M()(Rt,{VCarousel:Wt["a"],VCarouselItem:Dt["a"],VContainer:Lt["a"]});var Et=[{path:"",component:Yt,meta:{title:"Introduce"}}],Xt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-container",{staticClass:"fill-height",attrs:{fluid:""}},[n("v-row",{attrs:{align:"center",justify:"center"}},[n("v-col",{attrs:{cols:"12",sm:"8",md:"4"}},[n("v-card",{staticClass:"elevation-12"},[n("v-toolbar",{attrs:{color:"primary",dark:"",flat:""}},[n("v-toolbar-title",[t._v("Login form")]),n("v-spacer")],1),n("v-card-text",[n("v-form",[n("v-text-field",{attrs:{label:"Login",name:"login","prepend-icon":"mdi-account",type:"text"},on:{keypress:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.login(e)}},model:{value:t.user,callback:function(e){t.user=e},expression:"user"}}),n("v-text-field",{attrs:{id:"password",label:"Password",name:"password","prepend-icon":"mdi-lock",type:"password"},on:{keypress:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.login(e)}},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1)],1),n("v-card-subtitle",{staticClass:"red--text",domProps:{textContent:t._s(t.message)}}),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{color:"primary"},on:{click:t.login}},[t._v("Login")])],1)],1)],1)],1)],1)},Ht=[],Jt=Object(V["a"])("account"),Bt=Jt.mapActions,zt={name:"LoginView",data:function(){return{user:"",password:"",message:""}},methods:Object(_["a"])(Object(_["a"])({},Bt(["setToken"])),{},{login:function(){"robotics"===this.user&&"robotics2020"===this.password?(this.setToken("robotics"),this.$router.push("/")):(this.password="",this.message="User or password not match")}})},Zt=zt,$t=n("8336"),Nt=n("b0af"),Ut=n("99d9"),Ft=n("4bd4"),Gt=n("0fd9"),qt=n("8654"),Qt=n("71d9"),Kt=Object(r["a"])(Zt,Xt,Ht,!1,null,null,null),te=Kt.exports;M()(Kt,{VBtn:$t["a"],VCard:Nt["a"],VCardActions:Ut["a"],VCardSubtitle:Ut["b"],VCardText:Ut["c"],VCol:mt["a"],VContainer:Lt["a"],VForm:Ft["a"],VRow:Gt["a"],VSpacer:$["a"],VTextField:qt["a"],VToolbar:Qt["a"],VToolbarTitle:N["a"]});var ee=[{path:"",component:te,meta:{title:"Login"}}],ne=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-container",{staticClass:"fill-height",attrs:{fluid:""}},[n("v-row",{attrs:{align:"center",justify:"center"}},[n("v-col",{attrs:{cols:"12",sm:"8",md:"4"}},[n("v-card",{staticClass:"elevation-12"},[n("v-toolbar",{attrs:{color:"primary",dark:"",flat:""}},[n("v-toolbar-title",[t._v("Logout")])],1),n("v-card-text",[n("v-form")],1),n("v-card-actions",[n("v-spacer"),n("router-link",{attrs:{to:"/login"}},[n("v-btn",{attrs:{color:"primary"}},[t._v("Login")])],1),n("v-spacer")],1)],1)],1)],1)],1)},ie=[],ae=Object(V["a"])("account"),oe=ae.mapActions,se={name:"LogoutView",methods:Object(_["a"])({},oe(["setToken"])),mounted:function(){this.setToken(null)}},ce=se,re=Object(r["a"])(ce,ne,ie,!1,null,null,null),le=re.exports;M()(re,{VBtn:$t["a"],VCard:Nt["a"],VCardActions:Ut["a"],VCardText:Ut["c"],VCol:mt["a"],VContainer:Lt["a"],VForm:Ft["a"],VRow:Gt["a"],VSpacer:$["a"],VToolbar:Qt["a"],VToolbarTitle:N["a"]});var ue=[{path:"",component:le,meta:{title:"Logout"}}],ve=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-container",{attrs:{fluid:""}},[n("v-container",{attrs:{fluid:""}},[n("v-row",[n("v-col",{attrs:{cols:"12",xs:"12",sm:"12",md:"6",lg:"3",xl:"3"}},[n("AgvrBattery")],1),n("v-col",{attrs:{cols:"12",xs:"12",sm:"12",md:"6",lg:"3",xl:"3"}},[n("AgvrSignalStrength")],1)],1)],1),n("v-row",[n("v-col",[n("AgvrStatusDevices")],1)],1)],1)},de=[],he=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-container",{attrs:{fluid:""}},[n("v-card",{attrs:{elevation:"6"}},[n("v-card-title",[t._v("Status devices")]),n("v-data-table",{attrs:{headers:t.headers,items:t.statusDevices,"items-per-page":5,search:t.search,"loading-text":"Loading... Please wait",loading:t.isLoading},scopedSlots:t._u([{key:"top",fn:function(){return[n("v-row",{attrs:{"no-gutters":""}},[n("v-spacer"),n("v-col",{attrs:{xs:"12",sm:"8",md:"6",lg:"4"}},[n("v-text-field",{staticClass:"mx-4",attrs:{label:"Search"},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}})],1)],1)]},proxy:!0},{key:"item.name",fn:function(e){var i=e.item;return[n("v-icon",{attrs:{color:t.getColorLevel(i.level)},domProps:{textContent:t._s(t.getIconLevel(i.level))}}),n("span",[t._v(t._s(i.name))])]}},{key:"item.actions",fn:function(e){var i=e.item;return[n("v-icon",{attrs:{color:t.getColorLevel(i.level)},on:{click:function(){return t.viewValues(i)}}},[t._v(" mdi-view-list-outline ")])]}}],null,!0)})],1),n("v-dialog",{attrs:{"max-width":"800"},model:{value:t.dialogShow,callback:function(e){t.dialogShow=e},expression:"dialogShow"}},[n("v-card",[n("v-card-title",{class:"headline white--text "+t.getColorLevel(t.dialogItem.level)},[t._v(" "+t._s(t.dialogItem.name)+" ")]),n("v-card-subtitle",{class:"py-2 white--text "+t.getColorLevel(t.dialogItem.level)},[t._v(t._s(t.dialogItem.hardware_id))]),n("v-card-text",[t._v(t._s(t.dialogItem.message))]),n("v-simple-table",{staticClass:"mt-2",attrs:{height:"400px"}},[n("tbody",t._l(t.dialogItem.values,(function(e){return n("tr",{key:e.name},[n("td",[t._v(t._s(e.key))]),n("td",[t._v(t._s(e.value))])])})),0)])],1)],1)],1)},pe=[],ge=Object(V["a"])("navigation"),me=ge.mapState,fe=Object(V["a"])("agvs"),be=fe.mapState,ye={name:"AgvrStatusDevices",data:function(){return{search:"",isLoading:!0,headers:[{text:"Componet",value:"name"},{text:"Hardware ID",value:"hardware_id"},{text:"Message",value:"message"},{text:"",value:"actions",sortable:!1,width:50}],dialogShow:!1,dialogItem:{level:0,name:"",message:"",hardware_id:"",values:[]}}},computed:Object(_["a"])(Object(_["a"])({},me({navigationAgvId:function(t){return t.agvId}})),be({statusDevices:function(t){var e=this,n=t.find((function(t){return t.id===e.navigationAgvId}));return null!=n?n.statusDevices:[]}})),mounted:function(){null!=this.statusDevices&&this.statusDevices.length>0&&(this.isLoading=!1)},methods:{viewValues:function(t){this.dialogItem=t,this.dialogShow=!0},getColorLevel:function(t){switch(t){case 0:return"green darken-1";case 1:return"amber darken-1";case 2:return"red darken-1";case 3:return"blue-grey darken-1";default:return"black"}},getIconLevel:function(t){switch(t){case 0:return"mdi-check-circle-outline";case 1:return"mdi-alert";case 2:return"mdi-minus-circle";case 3:return"mdi-close-circle";default:return""}}},watch:{statusDevices:function(t){null!=t&&t.length>0&&(this.isLoading=!1)},dialogShow:function(t){!1===t&&(this.dialogItem={level:0,name:"",message:"",hardware_id:"",values:[]})}}},ke=ye,we=n("8fea"),xe=n("169a"),Me=n("1f4f"),je=Object(r["a"])(ke,he,pe,!1,null,null,null),Se=je.exports;M()(je,{VCard:Nt["a"],VCardSubtitle:Ut["b"],VCardText:Ut["c"],VCardTitle:Ut["d"],VCol:mt["a"],VContainer:Lt["a"],VDataTable:we["a"],VDialog:xe["a"],VIcon:Z["a"],VRow:Gt["a"],VSimpleTable:Me["a"],VSpacer:$["a"],VTextField:qt["a"]});var Ie=Se,Ce=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-card",{staticClass:"mt-4",attrs:{elevation:"8"}},[n("v-card-title",[n("v-card",{staticClass:"card-title-card",attrs:{color:"green darken-2",elevation:"8"}},[n("v-card-text",[n("v-icon",{attrs:{"x-large":"",color:"white"},domProps:{textContent:t._s(t.batteryIcon)}})],1)],1),n("v-spacer"),t._v(" "+t._s(t.batteryLevel)+"% ")],1),n("v-divider"),n("v-card-text",{staticClass:"pa-2"},[t._v(" Updated "+t._s(t.timeUpdated.toUTCString())+" ")])],1)},Oe=[],Te={name:"AgvrBattery",data:function(){return{batteryLevel:75,batteryIcon:"mdi-battery-alert-variant-outline",timeUpdated:new Date,timerUpdate:null}},methods:{getBatteryIcon:function(){return this.batteryLevel<5?"mdi-battery-alert-variant-outline":this.batteryLevel<15?"mdi-battery-10":this.batteryLevel<25?"mdi-battery-20":this.batteryLevel<35?"mdi-battery-30":this.batteryLevel<45?"mdi-battery-40":this.batteryLevel<55?"mdi-battery-50":this.batteryLevel<65?"mdi-battery-60":this.batteryLevel<75?"mdi-battery-70":this.batteryLevel<85?"mdi-battery-80":this.batteryLevel<95?"mdi-battery-90":"mdi-battery"}},mounted:function(){var t=this;this.batteryIcon=this.getBatteryIcon(),this.timerUpdate=setInterval((function(){t.timeUpdated=new Date}),5e3)},beforeDestroy:function(){clearInterval(this.timerUpdate)}},Pe=Te,Ae=(n("a46b"),Object(r["a"])(Pe,Ce,Oe,!1,null,"1d2e55c7",null)),_e=Ae.exports;M()(Ae,{VCard:Nt["a"],VCardText:Ut["c"],VCardTitle:Ut["d"],VDivider:it["a"],VIcon:Z["a"],VSpacer:$["a"]});var Ve=_e,We=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-card",{staticClass:"mt-4"},[n("v-card-title",[n("v-card",{staticClass:"card-title-card",attrs:{color:"green darken-2",elevation:"8"}},[n("v-card-text",[n("v-icon",{attrs:{"x-large":"",color:"white"},domProps:{textContent:t._s(t.batteryIcon)}})],1)],1),n("v-spacer"),t._v(" "+t._s(t.batteryLevel)+"% ")],1),n("v-divider"),n("v-card-text",{staticClass:"pa-2"},[t._v(" Updated "+t._s(t.timeUpdated.toUTCString())+" ")])],1)},De=[],Le={name:"AgvrStatus",data:function(){return{batteryLevel:75,batteryIcon:"mdi-battery-alert-variant-outline",timeUpdated:new Date,timerUpdate:null}},methods:{getBatteryIcon:function(){return this.batteryLevel<5?"mdi-battery-alert-variant-outline":this.batteryLevel<15?"mdi-battery-10":this.batteryLevel<25?"mdi-battery-20":this.batteryLevel<35?"mdi-battery-30":this.batteryLevel<45?"mdi-battery-40":this.batteryLevel<55?"mdi-battery-50":this.batteryLevel<65?"mdi-battery-60":this.batteryLevel<75?"mdi-battery-70":this.batteryLevel<85?"mdi-battery-80":this.batteryLevel<95?"mdi-battery-90":"mdi-battery"}},mounted:function(){var t=this;this.batteryIcon=this.getBatteryIcon(),this.timerUpdate=setInterval((function(){t.timeUpdated=new Date}),5e3)},beforeDestroy:function(){clearInterval(this.timerUpdate)}},Re=Le,Ye=(n("1e01"),Object(r["a"])(Re,We,De,!1,null,"85eaf8f8",null));Ye.exports;M()(Ye,{VCard:Nt["a"],VCardText:Ut["c"],VCardTitle:Ut["d"],VDivider:it["a"],VIcon:Z["a"],VSpacer:$["a"]});var Ee=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-card",{staticClass:"mt-4",attrs:{elevation:"8"}},[n("v-card-title",[n("v-card",{staticClass:"card-title-card",attrs:{color:"green darken-2",elevation:"8"}},[n("v-card-text",[n("v-icon",{attrs:{"x-large":"",color:"white"},domProps:{textContent:t._s(t.batteryIcon)}})],1)],1),n("v-spacer"),t._v(" -"+t._s(t.batteryLevel)+" dbm ")],1),n("v-divider"),n("v-card-text",{staticClass:"pa-2"},[t._v(" Updated "+t._s(t.timeUpdated.toUTCString())+" ")])],1)},Xe=[],He={name:"AgvrBattery",data:function(){return{batteryLevel:40,batteryIcon:"mdi-signal-cellular-outline",timeUpdated:new Date,timerUpdate:null}},methods:{getBatteryIcon:function(){return this.batteryLevel<5?"mdi-signal-cellular-outline":this.batteryLevel<15?"mdi-signal-cellular-1":this.batteryLevel<25?"mdi-signal-cellular-2":"mdi-signal-cellular-3"}},mounted:function(){var t=this;this.batteryIcon=this.getBatteryIcon(),this.timerUpdate=setInterval((function(){t.timeUpdated=new Date}),5e3)},beforeDestroy:function(){clearInterval(this.timerUpdate)}},Je=He,Be=(n("5831"),Object(r["a"])(Je,Ee,Xe,!1,null,"d8415070",null)),ze=Be.exports;M()(Be,{VCard:Nt["a"],VCardText:Ut["c"],VCardTitle:Ut["d"],VDivider:it["a"],VIcon:Z["a"],VSpacer:$["a"]});var Ze=ze,$e={name:"DashboardOverview",components:{AgvrStatusDevices:Ie,AgvrBattery:Ve,AgvrSignalStrength:Ze}},Ne=$e,Ue=Object(r["a"])(Ne,ve,de,!1,null,null,null),Fe=Ue.exports;M()(Ue,{VCol:mt["a"],VContainer:Lt["a"],VRow:Gt["a"]});var Ge=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-container",{staticClass:"fill-height pa-0 agv-navigation-controller",attrs:{fluid:""}},[n("router-view"),n("div",{staticClass:"topbar d-flex"},[n("v-icon",{staticClass:"blue--text text--darken-2 pa-1",attrs:{large:""},domProps:{textContent:t._s(t.navigationSubscribePose?"mdi-near-me":"mdi-crosshairs-gps")}}),n("AgvrPoseEditor"),n("AgvrMapPanZoomOption")],1)],1)},qe=[],Qe=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("image",{attrs:{href:n("1437"),transform:t.transformData,x:t.positionX,y:t.positionY,height:t.agvWebSize.height*t.agvMapScale/t.agvMapResolution,width:t.agvWebSize.width*t.agvMapScale/t.agvMapResolution},on:{contextmenu:t.onContextMenu,mousedown:t.selectedRobot,touchstart:t.selectedRobot}})},Ke=[],tn=(n("99af"),n("b680"),{name:"AgvrRobotx",data:function(){return{pathData:"",timeoutContextMenu:null}},props:{selectable:{type:Boolean,default:!1}},computed:Object(_["a"])(Object(_["a"])({},Object(V["e"])({agvMapResolution:function(t){return t.ros.maps[t.navigation.selectedMapId].rosMap.info.resolution},agvWebSize:function(t){return t.ros.agvs[t.navigation.selectedAgvId].webSize},agvWebPose:function(t){return t.ros.agvs[t.navigation.selectedAgvId].webPose},agvMapScale:function(t){return t.ros.maps[t.navigation.selectedMapId].webMap.scale},isContextMenuShow:function(t){return t.navigation.taskMenuContext.isShow||t.navigation.agvMenuContext.isShow||t.navigation.agvInitPoseMenuContext.isShow}})),{},{positionX:function(){return(this.agvWebPose.position.x-this.agvWebSize.width*this.agvMapScale/(2*this.agvMapResolution)).toFixed(0)},positionY:function(){return(this.agvWebPose.position.y-this.agvWebSize.height*this.agvMapScale/(2*this.agvMapResolution)).toFixed(0)},transformData:function(){return"rotate(".concat(90-this.agvWebPose.orientation.theta.toFixed(0),",").concat(this.agvWebPose.position.x.toFixed(0),",").concat(this.agvWebPose.position.y.toFixed(0),")")}}),methods:Object(_["a"])(Object(_["a"])({},Object(V["c"])({navigationShowAgvMenuContext:"navigation/showAgvMenuContext",navigationShowAgvInitPoseMenuContext:"navigation/showAgvInitPoseMenuContext",navigationDisableMapPanZoom:"navigation/disableMapPanZoom",navigationSelectedRobot:"navigation/selectedRobot"})),{},{onContextMenu:function(t){var e=this;t.preventDefault(),t.stopPropagation(),this.$nextTick((function(){e.selectable?e.navigationShowAgvInitPoseMenuContext({x:t.clientX,y:t.clientY}):e.navigationShowAgvMenuContext({x:t.clientX,y:t.clientY})}))},selectedRobot:function(){this.isContextMenuShow||(this.navigationDisableMapPanZoom(),this.selectable&&this.navigationSelectedRobot())}})}),en=tn,nn=Object(r["a"])(en,Qe,Ke,!1,null,null,null),an=(nn.exports,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-navigation-drawer",{style:{boxShadow:"none"},attrs:{absolute:"",temporary:"",right:"",width:"500"},model:{value:t.isShow,callback:function(e){t.isShow=e},expression:"isShow"}},[n("v-container",{staticClass:"pa-0",attrs:{fluid:""}},[n("v-row",{staticClass:"flex-shrink-1"},[n("v-col",[n("v-stepper",{staticClass:"action-management-stepper",attrs:{vertical:""},model:{value:t.step,callback:function(e){t.step=e},expression:"step"}},[t._l(t.actionCollection,(function(e,i){return[n("div",{key:"step-"+e.step,on:{contextmenu:function(e){return t.openMenuContext(e,i)}}},[n("v-stepper-step",{attrs:{step:e.step,"edit-icon":"mdi-puzzle-edit-outline",complete:"",editable:""}},[t._v(" "+t._s(e.name)+" ")])],1),n("v-stepper-content",{key:"stepper-content-"+e.step,attrs:{step:e.step}},[n("v-container",{staticClass:"pa-0",attrs:{fluid:""}},[n("v-text-field",{staticClass:"mt-2",attrs:{label:"Step name","append-icon":"mdi-square-edit-outline",outlined:"",dense:""},model:{value:e.name,callback:function(n){t.$set(e,"name",n)},expression:"stepItem.name"}}),n("v-combobox",{attrs:{label:"Action",items:t.actionLists,dense:"","hide-details":"",outlined:""},scopedSlots:t._u([{key:"selection",fn:function(e){var i=e.item;return[n("span",{staticClass:"pr-2"},[t._v(" "+t._s(t.actionTextLists[i])+" ")])]}},{key:"item",fn:function(e){var i=e.item;return[n("span",{staticClass:"pr-2"},[t._v(" "+t._s(t.actionTextLists[i])+" ")])]}}],null,!0),model:{value:e.action,callback:function(n){t.$set(e,"action",n)},expression:"stepItem.action"}})],1)],1)]})),n("div",{on:{contextmenu:function(t){return t.preventDefault()}}},[n("v-stepper-step",{attrs:{step:-1,"edit-icon":"mdi-plus",complete:"",editable:""},on:{click:t.addLastStep}})],1)],2)],1)],1),n("v-row",[n("v-spacer"),n("v-col",{staticClass:"px-6",attrs:{cols:"auto"}},[n("v-btn",{attrs:{depressed:"",color:"primary"},domProps:{textContent:t._s("Save")},on:{click:t.onSave}})],1)],1)],1),n("v-menu",{attrs:{"position-x":t.menuX,"position-y":t.menuY,absolute:"","offset-y":""},model:{value:t.isShowMenu,callback:function(e){t.isShowMenu=e},expression:"isShowMenu"}},[n("v-list",[n("v-list-item",{on:{click:t.addAboveStep}},[n("v-list-item-icon",[n("v-icon",[t._v("mdi-plus")])],1),n("v-list-item-title",{domProps:{textContent:t._s("Above")}})],1),n("v-list-item",{on:{click:t.addBelowStep}},[n("v-list-item-icon",[n("v-icon",[t._v("mdi-plus")])],1),n("v-list-item-title",{domProps:{textContent:t._s("Below")}})],1),n("v-list-item",{on:{click:t.deleteStep}},[n("v-list-item-icon",[n("v-icon",[t._v("mdi-delete")])],1),n("v-list-item-title",{domProps:{textContent:t._s("Delete")}})],1)],1)],1)],1)}),on=[],sn=(n("a434"),n("ade3")),cn=n("9612"),rn=(n("a9e3"),n("8ba4"),n("d3b7"),n("3ca3"),n("10d1"),n("ddb0"),n("d4ec")),ln=n("bee2"),un=n("5364"),vn=n("9bd1"),dn=n("e86b"),hn=n.n(dn),pn={Nothing:-1,Manual:0,Movebase:1,InitializePose:2,PlugCharger:3,UnplugCharger:4,LiftUp:5,LiftDown:6},gn=new WeakMap,mn=function(){function t(e){Object(rn["a"])(this,t),gn.set(this,{writable:!0,value:null}),e instanceof hn.a.Ros&&Object(vn["a"])(this,gn,new hn.a.Topic({ros:e,name:"/agv_action",messageType:"move_base/agv_action"}))}return Object(ln["a"])(t,[{key:"pushAction",value:function(t){null!=Object(un["a"])(this,gn)&&Number.isInteger(t)&&Object(un["a"])(this,gn).publish(new hn.a.Message({header:{seq:0,stamp:0,frame_id:""},action:t,status:0,action_id:"test"}))}},{key:"dispose",value:function(){Object(vn["a"])(this,gn,null)}}]),t}(),fn={name:"AgvrActionManagement",data:function(){var t;return{step:-1,actionLists:[pn.Nothing,pn.PlugCharger,pn.UnplugCharger,pn.LiftUp,pn.LiftDown],actionTextLists:(t={},Object(sn["a"])(t,pn.Nothing,"Do nothing"),Object(sn["a"])(t,pn.PlugCharger,"Plug charge"),Object(sn["a"])(t,pn.UnplugCharger,"Unplug charge"),Object(sn["a"])(t,pn.LiftUp,"Lift up"),Object(sn["a"])(t,pn.LiftDown,"Lift down"),t),actionCollection:[],isShowMenu:!1,menuX:0,menuY:0,selectedStep:-1}},methods:Object(_["a"])(Object(_["a"])({},Object(V["c"])({navigationShowActionManagement:"navigation/showActionManagement",navigationHideActionManagement:"navigation/hideActionManagement",updateActionsOfSelectedTask:"updateActionsOfSelectedTask"})),{},{openMenuContext:function(t,e){var n=this;this.selectedStep=e,t.preventDefault(),this.isShowMenu=!1,this.menuX=t.clientX,this.menuY=t.clientY,this.$nextTick((function(){n.isShowMenu=!0}))},addAboveStep:function(){this.selectedStep<0||this.actionCollection.splice(this.selectedStep,0,{step:cn["b"].v4(),name:"New step",action:this.actionLists[0]})},addBelowStep:function(){this.selectedStep<0||this.actionCollection.splice(this.selectedStep+1,0,{step:cn["b"].v4(),name:"New step",action:this.actionLists[0]})},deleteStep:function(){this.selectedStep<0||(this.actionCollection.splice(this.selectedStep,1),this.step=-1)},addLastStep:function(){this.actionCollection.push({step:cn["b"].v4(),name:"New step",action:this.actionLists[0]})},onSave:function(){console.log(this.actionCollection),this.updateActionsOfSelectedTask({actions:this.actionCollection})}}),computed:Object(_["a"])(Object(_["a"])(Object(_["a"])({},Object(V["e"])({navigationActionManagementShow:function(t){return t.navigation.actionManagement.isShow}})),Object(V["d"])({getListActionOfSelectedTask:"getListActionOfSelectedTask"})),{},{isShow:{get:function(){return this.navigationActionManagementShow},set:function(t){t?this.navigationShowActionManagement():this.navigationHideActionManagement()}}}),watch:{isShowMenu:function(t){0==t&&(this.selectedStep=-1)},isShow:function(t){t?this.actionCollection=this.getListActionOfSelectedTask():(this.actionCollection=[],this.step=-1)}}},bn=fn,yn=(n("010d"),n("2b5d")),kn=n("e449"),wn=n("7e85"),xn=n("e516"),Mn=n("56a4"),jn=Object(r["a"])(bn,an,on,!1,null,"0d3d39f2",null);jn.exports;M()(jn,{VBtn:$t["a"],VCol:mt["a"],VCombobox:yn["a"],VContainer:Lt["a"],VIcon:Z["a"],VList:ot["a"],VListItem:st["a"],VListItemIcon:rt["a"],VListItemTitle:ct["b"],VMenu:kn["a"],VNavigationDrawer:lt["a"],VRow:Gt["a"],VSpacer:$["a"],VStepper:wn["a"],VStepperContent:xn["a"],VStepperStep:Mn["a"],VTextField:qt["a"]});var Sn=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("g",{attrs:{visibility:null!=t.agvTask?"visible":"hidden"}},[n("defs",[n("marker",{attrs:{id:"arrowhead",markerWidth:"3",markerHeight:"2",refX:"1",refY:"1",orient:"auto"}},[n("polygon",{staticStyle:{fill:"limegreen"},attrs:{points:"0 0, 3 1, 0 2"}})])]),n("line",{attrs:{x1:null!=t.agvTask?t.agvTask.position.x:0,y1:null!=t.agvTask?t.agvTask.position.y:0,x2:null!=t.agvTask?t.agvTask.position.x+50*Math.cos(t.agvTask.thetaEnd*Math.PI/180):0,y2:null!=t.agvTask?t.agvTask.position.y-50*Math.sin(t.agvTask.thetaEnd*Math.PI/180):0,stroke:"limegreen","stroke-width":"10","marker-end":"url(#arrowhead)"},on:{mousedown:t.onMouseDown,touchstart:t.onMouseDown}})])},In=[],Cn={name:"AgvrEndTaskDirection",computed:Object(_["a"])({},Object(V["e"])({agvTask:function(t){var e=t.ros.jobs[t.navigation.selectedJobId];return null==e||0==e.tasks.length?null:e.tasks[e.tasks.length-1]},isContextMenuShow:function(t){return t.navigation.taskMenuContext.isShow||t.navigation.agvMenuContext.isShow||t.navigation.agvInitPoseMenuContext.isShow}})),methods:Object(_["a"])(Object(_["a"])({},Object(V["c"])({navigationDisableMapPanZoom:"navigation/disableMapPanZoom",navigationSelectedTaskThetaEnd:"navigation/selectedTaskThetaEnd"})),{},{onMouseDown:function(){this.isContextMenuShow||(this.navigationDisableMapPanZoom(),this.navigationSelectedTaskThetaEnd())}})},On=Cn,Tn=Object(r["a"])(On,Sn,In,!1,null,null,null),Pn=(Tn.exports,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"agv-joystick",style:{height:t.joystickHeight+"px",width:t.joystickWidth+"px"}},[n("div",{staticClass:"agv-joystick-point",style:{top:t.joystickHandleTop+"px",left:t.joystickHandleLeft+"px",height:t.joystickHandleHeight+"px",width:t.joystickHandleWidth+"px"},on:{mousedown:function(){return t.joystickClicked=!0},mouseup:function(){return t.joystickClicked=!1},mouseleave:function(){return t.joystickClicked=!1},mousemove:function(e){return t.joystickMove(e.movementX,e.movementY)},touchstart:t.joystickTouchStart,touchend:t.joystickTouchEnd,touchmove:t.onTouchMove}})])}),An=[],_n={controlMetaToTwistMessage:function(t){var e={x:t.y,y:0,z:0},n={x:0,y:0,z:-t.x};return{linear:e,angular:n}}},Vn={quaternionToGlobalTheta:function(t){var e=t.w,n=t.x,i=t.y,a=t.z;return 180*-Math.atan2(2*(e*a+n*i),1-2*(i*i+a*a))/Math.PI},globalThetaToQuaternion:function(t){var e=Math.sin(t/2),n=Math.cos(t/2);return new hn.a.Quaternion({x:0,y:0,z:e,w:n})}},Wn={name:"AgvrJoyStickButton",data:function(){return{joystickClicked:!1,joystickHandleTop:0,joystickHandleLeft:0,touchClientX:-1,touchClientY:-1}},props:{width:{type:Number,default:null},height:{type:Number,default:null},handleWidth:{type:Number,default:null},handleHeight:{type:Number,default:null}},computed:{joystickStyle:function(){return{height:this.height?"".concat(this.height,"px"):null,width:this.width?"".concat(this.width,"px"):null}},joystickWidth:function(){return this.width?this.width:200},joystickHeight:function(){return this.height?this.height:200},joystickHandleWidth:function(){return this.handleWidth?this.handleWidth:80},joystickHandleHeight:function(){return this.handleHeight?this.handleHeight:80},joystickHandleX:function(){return(this.joystickWidth-this.joystickHandleWidth)/2},joystickHandleY:function(){return(this.joystickHeight-this.joystickHandleHeight)/2}},mounted:function(){this.joystickResetPosition()},methods:{joystickMove:function(t,e){if(this.joystickClicked){var n=this.joystickHandleTop+e+this.joystickHandleHeight/2-this.joystickHeight/2,i=this.joystickHandleLeft+t+this.joystickHandleWidth/2-this.joystickWidth/2,a=Math.sqrt(Math.pow(i,2)+Math.pow(n,2));a<=this.joystickHandleX&&a<=this.joystickHandleY&&(this.joystickHandleTop+=e,this.joystickHandleLeft+=t,this.$agvr.pushCmdvel(_n.controlMetaToTwistMessage({x:i/this.joystickHandleX,y:-n/this.joystickHandleY})))}},joystickResetPosition:function(){this.joystickHandleTop=this.joystickHandleX,this.joystickHandleLeft=this.joystickHandleY,this.$agvr.pushCmdvel(_n.controlMetaToTwistMessage({x:0,y:0}))},joystickTouchStart:function(t){var e=t.changedTouches[0];this.touchClientX=e.clientX,this.touchClientY=e.clientY,this.joystickClicked=!0},joystickTouchEnd:function(){this.touchClientX=-1,this.touchClientY=-1,this.joystickClicked=!1},onTouchMove:function(t){if(t.preventDefault(),this.touchClientX>0&&this.touchClientY>0){var e=t.changedTouches[0];this.joystickMove(e.clientX-this.touchClientX,e.clientY-this.touchClientY),this.touchClientX=e.clientX,this.touchClientY=e.clientY}}},watch:{joystickClicked:function(t,e){t==e||t||this.joystickResetPosition()}}},Dn=Wn,Ln=(n("d057"),Object(r["a"])(Dn,Pn,An,!1,null,"183eeb2a",null)),Rn=(Ln.exports,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"agv-movement",style:t.movementStyle,on:{contextmenu:t.onContextMenu}},[n("v-row",{staticClass:"agv-movement-row",style:t.rowStyle},[n("v-col"),n("v-col",{staticClass:"agv-movement-forward",attrs:{align:"center",justify:"space-around"}},[n("v-btn",{staticClass:"agv-movement-button",attrs:{icon:""},on:{mousedown:function(e){return t.move({x:0,y:1})},mouseup:function(e){return t.move({x:0,y:0})},mouseout:function(e){return t.move({x:0,y:0})}}},[n("v-icon",[t._v("mdi-chevron-up")])],1)],1),n("v-col")],1),n("v-row",{staticClass:"agv-movement-row",style:t.rowStyle},[n("v-col",{staticClass:"agv-movement-left",attrs:{align:"center",justify:"space-around"}},[n("v-btn",{staticClass:"agv-movement-button",attrs:{icon:""},on:{mousedown:function(e){return t.move({x:-1,y:0})},mouseup:function(e){return t.move({x:0,y:0})},mouseout:function(e){return t.move({x:0,y:0})}}},[n("v-icon",[t._v("mdi-chevron-left")])],1)],1),n("v-col"),n("v-col",{staticClass:"agv-movement-right",attrs:{align:"center",justify:"center"}},[n("v-btn",{staticClass:"agv-movement-button",attrs:{icon:""},on:{mousedown:function(e){return t.move({x:1,y:0})},mouseup:function(e){return t.move({x:0,y:0})},mouseout:function(e){return t.move({x:0,y:0})}}},[n("v-icon",[t._v("mdi-chevron-right")])],1)],1)],1),n("v-row",{staticClass:"agv-movement-row",style:t.rowStyle},[n("v-col"),n("v-col",{staticClass:"agv-movement-backward",attrs:{align:"center",justify:"space-around"}},[n("v-btn",{staticClass:"agv-movement-button",attrs:{icon:""},on:{mousedown:function(e){return t.move({x:0,y:-1})},mouseup:function(e){return t.move({x:0,y:0})},mouseout:function(e){return t.move({x:0,y:0})}}},[n("v-icon",[t._v("mdi-chevron-down")])],1)],1),n("v-col")],1)],1)}),Yn=[],En={name:"AgvrMovementButton",props:{width:{type:Number,default:null},height:{type:Number,default:null}},computed:{movementStyle:function(){return{height:this.height?"".concat(this.height,"px"):null,width:this.width?"".concat(this.width,"px"):null}},rowStyle:function(){return{height:this.height?"".concat(this.height/3,"px"):null,width:this.width?"".concat(this.width,"px"):null}}},methods:{move:function(t){this.$agvr.pushCmdvel(_n.controlMetaToTwistMessage(t))},onContextMenu:function(t){t.preventDefault(),t.stopPropagation()}}},Xn=En,Hn=(n("8a7f"),Object(r["a"])(Xn,Rn,Yn,!1,null,"7610cc5d",null));Hn.exports;M()(Hn,{VBtn:$t["a"],VCol:mt["a"],VIcon:Z["a"],VRow:Gt["a"]});var Jn=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("foreignObject",{staticClass:"panzoom-map-image",attrs:{width:t.width,height:t.height}},[n("canvas",{ref:"mapImageRef"})])},Bn=[],zn={name:"AgvrRosMapImage",data:function(){return{mapCanvas:null,width:0,height:0}},computed:Object(_["a"])({},Object(V["e"])({navigationSvgMapImage:function(t){return t.agvMaps[t.navigation.selectedMapId].webMap.Image}})),mounted:function(){this.mapCanvas=this.$refs.mapImageRef,this.setMapData()},methods:{setMapData:function(){if(null!=this.navigationSvgMapImage){this.mapCanvas.width=this.navigationSvgMapImage.width,this.mapCanvas.height=this.navigationSvgMapImage.height;var t=this.mapCanvas.getContext("2d"),e=t.createImageData(this.navigationSvgMapImage.width,this.navigationSvgMapImage.height);e.data.set(this.navigationSvgMapImage.data),t.putImageData(e,0,0),console.log("putImageData ",e),this.width=this.navigationSvgMapImage.width,this.height=this.navigationSvgMapImage.height}}},watch:{navigationSvgMapImage:function(){this.setMapData()}}},Zn=zn,$n=(n("d678"),Object(r["a"])(Zn,Jn,Bn,!1,null,"6fc0ba3b",null)),Nn=($n.exports,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("circle",{attrs:{cx:t.agvTask.position.x,cy:t.agvTask.position.y,r:"8",stroke:t.selectedIndexTask==t.taskIndex?"blue":"red","stroke-width":"3",fill:"red"},on:{mousedown:t.onMouseDown,touchstart:t.onMouseDown,contextmenu:t.onContextMenu}})}),Un=[],Fn={name:"AgvrTaskOnMap",props:{taskIndex:{type:Number,default:-1}},computed:Object(_["a"])({},Object(V["e"])({agvTask:function(t){return t.ros.jobs[t.navigation.selectedJobId].tasks[this.taskIndex]},selectedIndexTask:function(t){return t.navigation.selectedIndexTask},isContextMenuShow:function(t){return t.navigation.taskMenuContext.isShow||t.navigation.agvMenuContext.isShow||t.navigation.agvInitPoseMenuContext.isShow}})),methods:Object(_["a"])(Object(_["a"])({},Object(V["c"])({navigationSetSelectedIndexTask:"navigation/setSelectedIndexTask",navigationShowTaskMenuContext:"navigation/showTaskMenuContext",navigationDisableMapPanZoom:"navigation/disableMapPanZoom",navigationSelectedTaskPosition:"navigation/selectedTaskPosition"})),{},{onMouseDown:function(){this.isContextMenuShow||(this.navigationSelectedTaskPosition(),this.navigationDisableMapPanZoom(),this.navigationSetSelectedIndexTask(this.taskIndex))},onContextMenu:function(t){var e=this;t.preventDefault(),t.stopPropagation(),this.$nextTick((function(){e.navigationShowTaskMenuContext({x:t.clientX,y:t.clientY})}))},update:function(){console.log("update")}})},Gn=Fn,qn=Object(r["a"])(Gn,Nn,Un,!1,null,null,null),Qn=(qn.exports,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("line",{staticStyle:{stroke:"rgb(0, 0, 255)","stroke-width":"2"},attrs:{x1:t.startWayPoint.x,y1:t.startWayPoint.y,x2:t.endWayPoint.x,y2:t.endWayPoint.y,"stroke-dasharray":"10,3"}})}),Kn=[],ti={name:"AgvrWayOnMap",props:{taskIndex:{type:Number,default:-1}},computed:Object(_["a"])({},Object(V["e"])({startWayPoint:function(t){return t.ros.jobs[t.navigation.selectedJobId].tasks[this.taskIndex-1].position},endWayPoint:function(t){return t.ros.jobs[t.navigation.selectedJobId].tasks[this.taskIndex].position}}))},ei=ti,ni=Object(r["a"])(ei,Qn,Kn,!1,null,null,null),ii=(ni.exports,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("line",{staticStyle:{stroke:"rgb(0, 0, 255)","stroke-width":"2"},attrs:{x1:t.positionX1,y1:t.positionY1,x2:t.positionX2,y2:t.positionY2,"stroke-dasharray":"10,3"}})}),ai=[],oi={name:"AgvrWayStartOnMap",computed:Object(_["a"])(Object(_["a"])({},Object(V["e"])({endWayPoint:function(t){return t.ros.jobs[t.navigation.selectedJobId].tasks.length>0?t.ros.jobs[t.navigation.selectedJobId].tasks[0].position:null},startWayPoint:function(t){return t.ros.agvs[t.navigation.selectedAgvId].webPose.position}})),{},{positionX1:function(){return this.startWayPoint.x.toFixed(0)},positionY1:function(){return this.startWayPoint.y.toFixed(0)},positionX2:function(){return(null!=this.endWayPoint?this.endWayPoint.x:this.startWayPoint.x).toFixed(0)},positionY2:function(){return(null!=this.endWayPoint?this.endWayPoint.y:this.startWayPoint.y).toFixed(0)}})},si=oi,ci=Object(r["a"])(si,ii,ai,!1,null,null,null),ri=(ci.exports,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-menu",{attrs:{rounded:"0","offset-y":""},scopedSlots:t._u([{key:"activator",fn:function(e){var i=e.attrs,a=e.on;return[n("v-btn",t._g(t._b({attrs:{icon:"","x-large":"",small:""}},"v-btn",i,!1),a),[n("v-icon",{attrs:{large:"",dark:""}},[t._v(" mdi-dots-vertical ")])],1)]}}])},[n("v-list",{attrs:{dense:""}},[n("v-list-item",{on:{click:function(){return t.pushRouterTo("/navigation/init")}}},[n("v-list-item-icon",[n("v-icon",{domProps:{textContent:t._s("mdi-crosshairs-gps")}})],1),n("v-list-item-content",[n("v-list-item-title",[t._v("Initialize pose")])],1)],1),n("v-list-item",{on:{click:function(){return t.pushRouterTo("/navigation")}}},[n("v-list-item-icon",[n("v-icon",{domProps:{textContent:t._s("mdi-near-me")}})],1),n("v-list-item-content",[n("v-list-item-title",[t._v("Navigation")])],1)],1),n("v-divider"),n("v-list-item",[n("v-list-item-action",[n("v-checkbox",{model:{value:t.isShowJoystickButton,callback:function(e){t.isShowJoystickButton=e},expression:"isShowJoystickButton"}})],1),n("v-list-item-content",[n("v-list-item-title",[t._v("Show joystick button")])],1)],1),n("v-list-item",[n("v-list-item-action",[n("v-checkbox",{model:{value:t.isShowMovementButton,callback:function(e){t.isShowMovementButton=e},expression:"isShowMovementButton"}})],1),n("v-list-item-content",[n("v-list-item-title",[t._v("Show movement button")])],1)],1)],1)],1)}),li=[],ui=Object(V["a"])("navigation"),vi=ui.mapState,di=ui.mapActions,hi={name:"AgvrMapPanZoomOption",methods:Object(_["a"])(Object(_["a"])({},di(["showJoystickButton","hideJoystickButton","showMovementButton","hideMovementButton","setNavigationState"])),{},{pushRouterTo:function(t){this.$router.currentRoute.path!==t&&this.$router.push(t)}}),computed:Object(_["a"])(Object(_["a"])({},vi({joystickButtonState:function(t){return t.joystickButton.isShow},movementButtonState:function(t){return t.movementButton.isShow}})),{},{isShowJoystickButton:{get:function(){return this.joystickButtonState},set:function(t){t?this.showJoystickButton():this.hideJoystickButton()}},isShowMovementButton:{get:function(){return this.movementButtonState},set:function(t){t?this.showMovementButton():this.hideMovementButton()}}})},pi=hi,gi=n("ac7c"),mi=n("1800"),fi=Object(r["a"])(pi,ri,li,!1,null,null,null),bi=fi.exports;M()(fi,{VBtn:$t["a"],VCheckbox:gi["a"],VDivider:it["a"],VIcon:Z["a"],VList:ot["a"],VListItem:st["a"],VListItemAction:mi["a"],VListItemContent:ct["a"],VListItemIcon:rt["a"],VListItemTitle:ct["b"],VMenu:kn["a"]});var yi=bi,ki=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("g",[n("defs",[n("marker",{attrs:{id:"arrowhead",markerWidth:"3",markerHeight:"2",refX:"1",refY:"1",orient:"auto"}},[n("polygon",{staticStyle:{fill:"limegreen"},attrs:{points:"0 0, 3 1, 0 2"}})])]),n("line",{attrs:{x1:t.agvPose.position.x,y1:t.agvPose.position.y,x2:t.agvPose.position.x+100*Math.cos(t.agvPose.orientation.theta*Math.PI/180),y2:t.agvPose.position.y-100*Math.sin(t.agvPose.orientation.theta*Math.PI/180),stroke:"limegreen","stroke-width":"10","marker-end":"url(#arrowhead)"},on:{mousedown:t.selectedRobotDirection,touchstart:t.selectedRobotDirection}})])},wi=[],xi={name:"AgvrRobotDirection",computed:Object(_["a"])({},Object(V["e"])({agvPose:function(t){return t.ros.agvs[t.navigation.selectedAgvId].webPose},isContextMenuShow:function(t){return t.navigation.taskMenuContext.isShow||t.navigation.agvMenuContext.isShow||t.navigation.agvInitPoseMenuContext.isShow}})),methods:Object(_["a"])(Object(_["a"])({},Object(V["c"])({navigationDisableMapPanZoom:"navigation/disableMapPanZoom",navigationSelectedRobotDirection:"navigation/selectedRobotDirection"})),{},{selectedRobotDirection:function(){this.isContextMenuShow||(this.navigationDisableMapPanZoom(),this.navigationSelectedRobotDirection())}})},Mi=xi,ji=Object(r["a"])(Mi,ki,wi,!1,null,null,null),Si=(ji.exports,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-container",{staticClass:"pa-0",attrs:{fluid:""}},[n("v-row",{attrs:{"no-gutters":"",justify:"center"}},[n("v-col",{staticClass:"pa-1 pt-2",attrs:{xs:"12",sm:"4",md:"3",lg:"2"}},[n("v-text-field",{attrs:{type:"number",color:"black","prepend-inner-icon":"mdi-axis-x-arrow","append-icon":"mdi-alpha-m",label:"X axit",outlined:"",dense:"",step:.001,readonly:t.readOnly,"hide-details":""},on:{keypress:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.updatePosition(e)},blur:t.updatePosition},model:{value:t.positionX,callback:function(e){t.positionX=e},expression:"positionX"}})],1),n("v-col",{staticClass:"pa-1 pt-2",attrs:{xs:"12",sm:"4",md:"3",lg:"2"}},[n("v-text-field",{attrs:{type:"number",color:"black","prepend-inner-icon":"mdi-axis-y-arrow","append-icon":"mdi-alpha-m",label:"Y axit",outlined:"",dense:"",step:.001,readonly:t.readOnly,"hide-details":""},on:{keypress:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.updatePosition(e)},blur:t.updatePosition},model:{value:t.positionY,callback:function(e){t.positionY=e},expression:"positionY"}})],1),n("v-col",{staticClass:"pa-1 pt-2",attrs:{xs:"12",sm:"4",md:"3",lg:"2"}},[n("v-text-field",{attrs:{type:"number",color:"black","prepend-inner-icon":"mdi-axis-z-rotate-counterclockwise","append-icon":"mdi-alpha-d",label:"Z angle",outlined:"",dense:"",step:.001,readonly:t.readOnly,"hide-details":""},on:{keypress:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.updateAngle(e)},blur:t.updateAngle},model:{value:t.angleZ,callback:function(e){t.angleZ=e},expression:"angleZ"}})],1),n("v-col",[t._v(" Quality ")])],1)],1)}),Ii=[],Ci={name:"AgvrPoseEditor",data:function(){return{tmpPositionX:0,tmpPositionY:0,tmpAngleZ:0}},props:{readOnly:{type:Boolean,default:!1}},methods:Object(_["a"])(Object(_["a"])({},Object(V["c"])({setSelectedAgvPosition:"setSelectedAgvPosition",setSelectedAgvDirection:"setSelectedAgvDirection"})),{},{updatePosition:function(){this.setSelectedAgvPosition({x:(this.tmpPositionX-this.agvRosMapInfo.origin.position.x)*this.agvMapScale/this.agvRosMapInfo.resolution,y:((this.agvRosMapInfo.origin.position.y-this.tmpPositionY)/this.agvRosMapInfo.resolution+this.agvRosMapInfo.height)*this.agvMapScale})},updateAngle:function(){this.setSelectedAgvDirection({theta:this.tmpAngleZ})}}),computed:Object(_["a"])(Object(_["a"])({},Object(V["e"])({agvMapScale:function(t){return t.ros.maps[t.navigation.selectedMapId].webMap.scale},agvRosMapInfo:function(t){return t.ros.maps[t.navigation.selectedMapId].rosMap.info},agvWebPose:function(t){return t.ros.agvs[t.navigation.selectedAgvId].webPose}})),{},{positionX:{get:function(){return(this.agvRosMapInfo.origin.position.x+this.agvWebPose.position.x*this.agvRosMapInfo.resolution/this.agvMapScale).toFixed(2)},set:function(t){this.tmpPositionX=t}},positionY:{get:function(){return(this.agvRosMapInfo.origin.position.y-(this.agvWebPose.position.y/this.agvMapScale-this.agvRosMapInfo.height)*this.agvRosMapInfo.resolution).toFixed(2)},set:function(t){this.tmpPositionY=t}},angleZ:{get:function(){return this.agvWebPose.orientation.theta.toFixed(0)},set:function(t){this.tmpAngleZ=t}}}),mounted:function(){this.tmpPositionX=this.positionX,this.tmpPositionY=this.positionY,this.tmpAngleZ=this.angleZ}},Oi=Ci,Ti=(n("ccb0"),Object(r["a"])(Oi,Si,Ii,!1,null,"60c2791f",null));Ti.exports;M()(Ti,{VCol:mt["a"],VContainer:Lt["a"],VRow:Gt["a"],VTextField:qt["a"]});var Pi=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-container",{staticClass:"pa-0",attrs:{fluid:""}},[n("v-row",{attrs:{"no-gutters":"",justify:"center"}},[n("v-col",{staticClass:"pa-1 pt-2",attrs:{xs:"12",sm:"4",md:"3",lg:"2"}},[n("v-text-field",{attrs:{type:"number",color:"black","prepend-inner-icon":"mdi-axis-x-arrow","append-icon":"mdi-alpha-m",label:"X axit",outlined:"",dense:"",step:.001,readonly:t.readOnly,"hide-details":""},on:{keypress:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.updatePosition(e)},blur:t.updatePosition},model:{value:t.positionX,callback:function(e){t.positionX=e},expression:"positionX"}})],1),n("v-col",{staticClass:"pa-1 pt-2",attrs:{xs:"12",sm:"4",md:"3",lg:"2"}},[n("v-text-field",{attrs:{type:"number",color:"black","prepend-inner-icon":"mdi-axis-y-arrow","append-icon":"mdi-alpha-m",label:"Y axit",outlined:"",dense:"",step:.001,readonly:t.readOnly,"hide-details":""},on:{keypress:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.updatePosition(e)},blur:t.updatePosition},model:{value:t.positionY,callback:function(e){t.positionY=e},expression:"positionY"}})],1),n("v-col",{staticClass:"pa-1 pt-2",attrs:{xs:"12",sm:"4",md:"3",lg:"2"}},[n("v-text-field",{attrs:{type:"number",color:"black","prepend-inner-icon":"mdi-axis-z-rotate-counterclockwise","append-icon":"mdi-alpha-d",label:"Z angle",outlined:"",dense:"",step:.001,readonly:t.readOnly,"hide-details":""},on:{keypress:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.updateAngle(e)},blur:t.updateAngle},model:{value:t.angleZ,callback:function(e){t.angleZ=e},expression:"angleZ"}})],1),n("div",{staticClass:"d-flex"},[n("span",{staticClass:"align-self-center"},[t._v(t._s(t.agvSim1000PoseQuality)+"%")])])],1)],1)},Ai=[],_i=Object(V["a"])("navigation"),Vi=_i.mapState,Wi=Object(V["a"])("agvs"),Di=Wi.mapState,Li=Wi.mapActions,Ri=Object(V["a"])("agvMaps"),Yi=Ri.mapState,Ei={name:"AgvrPoseEditor",data:function(){return{tmpPositionX:0,tmpPositionY:0,tmpAngleZ:0}},computed:Object(_["a"])(Object(_["a"])(Object(_["a"])(Object(_["a"])({},Vi({navigationMapId:function(t){return t.mapId},navigationAgvId:function(t){return t.agvId}})),Di({agvWebPose:function(t){var e=this,n=t.find((function(t){return t.id===e.navigationAgvId}));return null!=n?n.webPose:{position:{x:0,y:0,z:0},orientation:{x:0,y:0,z:0}}},agvSim1000PoseQuality:function(t){var e=this,n=t.find((function(t){return t.id===e.navigationAgvId}));return null!=n?n.sim1000Pose.Quality:0}})),Yi({agvMapScale:function(t){var e=this,n=t.find((function(t){return t.id===e.navigationMapId}));return null!=n?n.webMap.scale:1},agvRosMapInfo:function(t){var e=this,n=t.find((function(t){return t.id===e.navigationMapId}));return n.rosMap.info}})),{},{positionX:{get:function(){return(this.agvRosMapInfo.origin.position.x+this.agvWebPose.position.x*this.agvRosMapInfo.resolution/this.agvMapScale).toFixed(2)},set:function(t){this.tmpPositionX=t}},positionY:{get:function(){return(this.agvRosMapInfo.origin.position.y-(this.agvWebPose.position.y/this.agvMapScale-this.agvRosMapInfo.height)*this.agvRosMapInfo.resolution).toFixed(2)},set:function(t){this.tmpPositionY=t}},angleZ:{get:function(){return this.agvWebPose.orientation.z.toFixed(0)},set:function(t){this.tmpAngleZ=t}},readOnly:function(){return"/navigation/init"!=this.$router.currentRoute.path}}),methods:Object(_["a"])(Object(_["a"])({},Li({setAgvDirection:"setAgvDirection",setAgvPosition:"setAgvPosition"})),{},{updatePosition:function(){this.setAgvPosition({x:(this.tmpPositionX-this.agvRosMapInfo.origin.position.x)*this.agvMapScale/this.agvRosMapInfo.resolution,y:((this.agvRosMapInfo.origin.position.y-this.tmpPositionY)/this.agvRosMapInfo.resolution+this.agvRosMapInfo.height)*this.agvMapScale,z:0,agvId:this.navigationAgvId})},updateAngle:function(){this.setAgvDirection({x:0,y:0,z:this.tmpAngleZ,agvId:this.navigationAgvId})}}),mounted:function(){this.tmpPositionX=this.positionX,this.tmpPositionY=this.positionY,this.tmpAngleZ=this.angleZ}},Xi=Ei,Hi=(n("3d15"),Object(r["a"])(Xi,Pi,Ai,!1,null,"0e1fa023",null)),Ji=Hi.exports;M()(Hi,{VCol:mt["a"],VContainer:Lt["a"],VRow:Gt["a"],VTextField:qt["a"]});var Bi=Ji,zi=Object(V["a"])("navigation"),Zi=zi.mapState,$i={name:"Navigation",components:{AgvrMapPanZoomOption:yi,AgvrPoseEditor:Bi},computed:Object(_["a"])({},Zi({joystickButtonState:function(t){return t.joystickButton.isShow},movementButtonState:function(t){return t.movementButton.isShow},navigationState:function(t){return t.navigationState},navigationSubscribePose:function(t){return t.subscribePose}}))},Ni=$i,Ui=(n("a47d8"),Object(r["a"])(Ni,Ge,qe,!1,null,"41bd12a0",null)),Fi=Ui.exports;M()(Ui,{VContainer:Lt["a"],VIcon:Z["a"]});var Gi=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-container",{attrs:{fluid:""}},[n("v-row",[n("v-col",{attrs:{xs:"12",sm:"8",md:"6",lg:"4"}},[n("v-list",[t._l(t.settingMeta,(function(t,e){return["group"===t.type?n("SettingGroupComponent",{key:"setting-group-"+t.text+"-"+e,attrs:{pathStore:[].concat(t.pathStore),text:t.text,settings:t.settings}}):n("SettingComponent",{key:"setting-component-"+t.text+"-"+e,attrs:{pathStore:[].concat(t.pathStore),text:t.text,type:t.type,unit:t.unit,step:t.step}})]}))],2)],1)],1)],1)},qi=[],Qi=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-list-item",[n("v-list-item-content",[n("v-text-field",{attrs:{type:t.inputType,label:t.text,outlined:"",rules:t.inputRules,suffix:t.unit,step:t.step},model:{value:t.valueInput,callback:function(e){t.valueInput=e},expression:"valueInput"}})],1)],1)},Ki=[],ta=n("2909");function ea(t,e){return null==e||e.length<=0?t:ea(t[e[0]],Object(ta["a"])(e).splice(1,e.length-1))}function na(t,e,n){if(null!=n)if(n.length<=0)t=e;else{if(1!=n.length)return na(t[n[0]],e,Object(ta["a"])(n).splice(1,n.length-1));t[n[0]]=e}}var ia={getDeepProperty:ea,setDeepProperty:na},aa={name:"setting-component",props:{pathStore:{type:Array,default:function(){return[]}},text:{type:String,default:""},type:{type:String,default:""},unit:{type:String,default:""},step:{type:Number,default:.1}},computed:Object(_["a"])(Object(_["a"])({},Object(V["e"])({value:function(t){return ia.getDeepProperty(t,this.pathStore)}})),{},{valueInput:{get:function(){return this.value},set:function(t){this.setProperty({value:this.getValue(t)||0,properties:this.pathStore})}},inputType:function(){switch(this.type){case"double":case"integer":return"number";default:return"text"}},inputRules:function(){var t=[function(t){return!!t||0==t||"Required."}];return t}}),methods:Object(_["a"])(Object(_["a"])({},Object(V["c"])(["setProperty"])),{},{getValue:function(t){switch(this.type){case"double":return parseFloat(t);case"integer":return parseInt(t);default:return t}}})},oa=aa,sa=Object(r["a"])(oa,Qi,Ki,!1,null,null,null),ca=sa.exports;M()(sa,{VListItem:st["a"],VListItemContent:ct["a"],VTextField:qt["a"]});var ra=ca,la=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-list-group",{attrs:{value:!1,"no-action":"","sub-group":""},scopedSlots:t._u([{key:"activator",fn:function(){return[n("v-list-item-content",[n("v-list-item-title",[t._v(t._s(t.text))])],1)]},proxy:!0}])},[t._l(t.settings,(function(e,i){return["group"===e.type?n("SettingGroupComponent",{key:"setting-group-"+t.text+"-"+i,attrs:{pathStore:t.pathStore.concat(e.pathStore),text:e.text,settings:e.settings}}):n("SettingComponent",{key:"setting-component-"+t.text+"-"+i,attrs:{pathStore:t.pathStore.concat(e.pathStore),text:e.text,type:e.type,unit:e.unit,step:e.step}})]}))],2)},ua=[],va={name:"SettingGroupComponent",components:{SettingComponent:ra},props:{pathStore:{type:Array,default:function(){return[]}},text:{type:String,default:""},settings:{type:Array,default:function(){return[]}}}},da=va,ha=n("56b0"),pa=Object(r["a"])(da,la,ua,!1,null,null,null),ga=pa.exports;M()(pa,{VListGroup:ha["a"],VListItemContent:ct["a"],VListItemTitle:ct["b"]});var ma=ga,fa=Object(V["a"])("settings"),ba=fa.mapState,ya={name:"Setting",components:{SettingComponent:ra,SettingGroupComponent:ma},computed:Object(_["a"])({},ba({settingMeta:function(t){return t.settings}}))},ka=ya,wa=Object(r["a"])(ka,Gi,qi,!1,null,null,null),xa=wa.exports;M()(wa,{VCol:mt["a"],VContainer:Lt["a"],VList:ot["a"],VRow:Gt["a"]});var Ma=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-container",[t._v(" Security ")])},ja=[],Sa={name:"Secrity"},Ia=Sa,Ca=Object(r["a"])(Ia,Ma,ja,!1,null,null,null),Oa=Ca.exports;M()(Ca,{VContainer:Lt["a"]});var Ta=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-container",{staticClass:"pa-0 agv-navigation",attrs:{fluid:""}},[n("panZoom",{staticClass:"panzoom-map-viewer",attrs:{selector:"#"+t.graphicID,options:{minZoom:.5,maxZoom:5,zoomSpeed:.05,zoomDoubleClickSpeed:1,onDoubleClick:t.onPanZoomDoubleClick,autocenter:!1}},on:{init:t.onInitZoomPan}},[n("svg",{staticClass:"map-viewer-svg",attrs:{xmlns:"http://www.w3.org/2000/svg",height:t.sgvHeight,width:t.sgvWidth,id:t.graphicID},on:{mousemove:t.onMouseMove,contextmenu:t.onContextMenu}},[n("g",{on:{touchstart:t.onTouchStart,touchmove:t.onTouchMove,touchend:t.onTouchEnd}},[n("AgvrMapImage",{attrs:{mapId:t.navigationMapId}}),t._l(t.agvIdsOnMap,(function(t){return n("WayAgvToTaskPosition",{key:"way-from-agv-to-task-"+t,attrs:{agvId:t}})})),t._l(t.agvJobsIdOnMap,(function(t){return n("WayFromTaskToTask",{key:"line-des-"+t,attrs:{jobId:t}})})),n("AgvrEndTaskDirection"),t._l(t.agvJobsIdOnMap,(function(t){return n("AgvrTasksOnMap",{key:"agv-task-"+t,attrs:{jobId:t}})})),t._l(t.agvIdsOnMap,(function(e){return n("AgvrRobot",{key:"agv-"+e,attrs:{agvId:e,agvMapResolution:t.agvMapResolution,agvMapScale:t.agvMapScale}})}))],2)])]),n("AgvrRobotNavigationMenuContext"),n("AgvrTaskMenuContext"),n("AgvrActionManagement"),t.joystickButtonState?n("span",{staticClass:"joystick"},[n("AgvrJoyStickButton")],1):t._e(),t.movementButtonState?n("span",{staticClass:"movement"},[n("AgvrMovementButton")],1):t._e()],1)},Pa=[],Aa=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("foreignObject",{staticClass:"panzoom-map-image",attrs:{width:t.width,height:t.height}},[n("canvas",{ref:"mapImageRef"})])},_a=[],Va=Object(V["a"])("agvMaps"),Wa=Va.mapState,Da={name:"AgvrMapImage",props:{mapId:{type:String,default:""}},data:function(){return{mapCanvas:null,width:0,height:0}},computed:Object(_["a"])({},Wa({agvMapImage:function(t){var e=this,n=t.find((function(t){return t.id===e.mapId}));return null!=n?n.webMap.Image:null}})),mounted:function(){this.mapCanvas=this.$refs.mapImageRef,this.setMapImage()},methods:{setMapImage:function(){var t=this.agvMapImage;if(null!=t){this.width=t.width,this.height=t.height,this.mapCanvas.width=t.width,this.mapCanvas.height=t.height;var e=this.mapCanvas.getContext("2d"),n=e.createImageData(t.width,t.height);n.data.set(t.data),e.putImageData(n,0,0)}}},watch:{agvMapImage:function(){this.setMapImage()}}},La=Da,Ra=(n("b4a7"),Object(r["a"])(La,Aa,_a,!1,null,"13839eb4",null)),Ya=Ra.exports,Ea=Ya,Xa=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("line",{staticStyle:{stroke:"rgb(0, 0, 255)","stroke-width":"2"},attrs:{x1:t.positionX1,y1:t.positionY1,x2:t.positionX2,y2:t.positionY2,"stroke-dasharray":"10,3"}})},Ha=[],Ja=Object(V["a"])("agvs"),Ba=Ja.mapState,za=Object(V["a"])("agvJobs"),Za=za.mapState,$a={name:"WayAgvToTaskPosition",data:function(){return{positionX1:0,positionY1:0,positionX2:0,positionY2:0}},props:{agvId:{type:String,default:""}},computed:Object(_["a"])(Object(_["a"])({},Ba({jobId:function(t){var e=this,n=t.find((function(t){return t.id===e.agvId}));return null!=n?n.jobId:""},taskId:function(t){var e=this,n=t.find((function(t){return t.id===e.agvId}));return null!=n?n.taskId:""},startWayPoint:function(t){var e=this,n=t.find((function(t){return t.id===e.agvId}));return null!=n?n.webPose.position:{x:0,y:0,z:0}}})),Za({endWayPoint:function(t){var e=this,n=t.find((function(t){return t.id===e.jobId}));if(null==n||0==n.tasks.length)return null;var i=n.tasks.find((function(t){return t.id===e.taskId}));return null!=i?i.position:n.tasks[0].position}})),watch:{startWayPoint:function(t){var e={x:Math.floor(t.x),y:Math.floor(t.y)};this.positionX1=e.x,this.positionY1=e.y,null==this.endWayPoint&&(this.positionX2=e.x,this.positionY2=e.y)},endWayPoint:function(t){null==t?(this.positionX2=Math.floor(this.startWayPoint.x),this.positionY2=Math.floor(this.startWayPoint.y)):(this.positionX2=Math.floor(t.x),this.positionY2=Math.floor(t.y))}},mounted:function(){this.positionX1=Math.floor(this.startWayPoint.x),this.positionY1=Math.floor(this.startWayPoint.y),null==this.endWayPoint?(this.positionX2=Math.floor(this.startWayPoint.x),this.positionY2=Math.floor(this.startWayPoint.y)):(this.positionX2=Math.floor(this.endWayPoint.x),this.positionY2=Math.floor(this.endWayPoint.y))}},Na=$a,Ua=Object(r["a"])(Na,Xa,Ha,!1,null,null,null),Fa=Ua.exports,Ga=Fa,qa=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("image",{attrs:{href:n("1437"),transform:t.transformData,x:Math.floor(t.agvWebPose.position.x-t.agvWidth/2),y:Math.floor(t.agvWebPose.position.y-t.agvHeight/2),height:t.agvHeight,width:t.agvWidth},on:{contextmenu:t.onContextMenu,mousedown:t.selectedRobot,touchstart:t.selectedRobot}})},Qa=[],Ka=Object(V["a"])("navigation"),to=Ka.mapState,eo=Ka.mapActions,no=Object(V["a"])("agvs"),io=no.mapState,ao={name:"AgvrRobot",data:function(){return{pathData:"",timeoutContextMenu:null,agvWidth:0,agvHeight:0}},props:{selectable:{type:Boolean,default:!1},agvId:{type:String,default:""},agvMapResolution:{type:Number,default:1},agvMapScale:{type:Number,default:1}},computed:Object(_["a"])(Object(_["a"])(Object(_["a"])({},io({agvWebSize:function(t){var e=this;return t.find((function(t){return t.id===e.agvId})).size},agvWebPose:function(t){var e=this,n=t.find((function(t){return t.id===e.agvId}));return null!=n?n.webPose:{position:{x:0,y:0,z:0},orientation:{x:0,y:0,z:0}}}})),to({isContextMenuShow:function(t){return t.taskMenuContext.isShow||t.agvMenuContext.isShow||t.agvInitPoseMenuContext.isShow}})),{},{transformData:function(){return"rotate(".concat(Math.floor(90-this.agvWebPose.orientation.z),",").concat(Math.floor(this.agvWebPose.position.x),",").concat(Math.floor(this.agvWebPose.position.y),")")}}),methods:Object(_["a"])(Object(_["a"])({},eo({navigationShowAgvMenuContext:"showAgvMenuContext",navigationShowAgvInitPoseMenuContext:"showAgvInitPoseMenuContext",navigationDisableMapPanZoom:"disableMapPanZoom",navigationSelectedRobot:"selectedRobot"})),{},{onContextMenu:function(t){var e=this;t.preventDefault(),t.stopPropagation(),this.$nextTick((function(){e.selectable?e.navigationShowAgvInitPoseMenuContext({x:t.clientX,y:t.clientY}):e.navigationShowAgvMenuContext({x:t.clientX,y:t.clientY})}))},selectedRobot:function(){this.isContextMenuShow||(this.navigationDisableMapPanZoom(),this.selectable&&this.navigationSelectedRobot())}}),mounted:function(){this.agvWidth=this.agvWebSize.width*this.agvMapScale/this.agvMapResolution,this.agvHeight=this.agvWebSize.height*this.agvMapScale/this.agvMapResolution},watch:{agvWebSize:function(t){this.agvWidth=t.width*this.agvMapScale/this.agvMapResolution,this.agvHeight=t.height*this.agvMapScale/this.agvMapResolution},agvMapResolution:function(t){this.agvWidth=this.agvWebSize.width*this.agvMapScale/t,this.agvHeight=this.agvWebSize.height*this.agvMapScale/t}}},oo=ao,so=Object(r["a"])(oo,qa,Qa,!1,null,null,null),co=so.exports,ro=co,lo=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("g",[t.agvTasks.length>0?t._l(t.agvTasks.length-1,(function(e){return n("line",{key:"way-"+t.jobId+"-"+t.agvTasks[e-1].id+"-"+t.agvTasks[e].id,staticStyle:{stroke:"rgb(0, 0, 255)","stroke-width":"2"},attrs:{x1:t.agvTasks[e-1].position.x,y1:t.agvTasks[e-1].position.y,x2:t.agvTasks[e].position.x,y2:t.agvTasks[e].position.y,"stroke-dasharray":"10,3"}})})):t._e()],2)},uo=[],vo=Object(V["a"])("agvJobs"),ho=vo.mapState,po={name:"WayFromTaskToTask",props:{jobId:{type:String,default:""}},computed:Object(_["a"])({},ho({agvTasks:function(t){var e=this,n=t.find((function(t){return t.id===e.jobId}));return null!=n?n.tasks:[]}}))},go=po,mo=Object(r["a"])(go,lo,uo,!1,null,null,null),fo=mo.exports,bo=fo,yo=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("g",t._l(t.agvTasks,(function(e){return n("circle",{key:"way-"+t.jobId+"-"+e.id,attrs:{cx:e.position.x,cy:e.position.y,r:"8",stroke:e.id===t.navigationTaskId?"blue":"red","stroke-width":"3",fill:"red"},on:{mousedown:function(){return t.onMouseDown(e.id)},touchstart:function(){return t.onMouseDown(e.id)},contextmenu:t.onContextMenu}})})),0)},ko=[],wo=Object(V["a"])("agvJobs"),xo=wo.mapState,Mo=Object(V["a"])("navigation"),jo=Mo.mapState,So=Mo.mapActions,Io={name:"AgvrTasksOnMap",props:{jobId:{type:String,default:""}},computed:Object(_["a"])(Object(_["a"])({},jo({navigationTaskId:function(t){return t.taskId},selectedIndexTask:function(t){return t.selectedIndexTask},isContextMenuShow:function(t){return t.taskMenuContext.isShow||t.agvMenuContext.isShow||t.agvInitPoseMenuContext.isShow}})),xo({agvTasks:function(t){var e=this,n=t.find((function(t){return t.id===e.jobId}));return null!=n?n.tasks:[]}})),methods:Object(_["a"])(Object(_["a"])({},So({navigationSetSelectedTaskId:"setSelectedTaskId",navigationShowTaskMenuContext:"showTaskMenuContext",navigationDisableMapPanZoom:"disableMapPanZoom",navigationSelectedTaskPosition:"selectedTaskPosition"})),{},{onMouseDown:function(t){console.log(t),this.isContextMenuShow||(this.navigationDisableMapPanZoom(),this.navigationSelectedTaskPosition(),this.navigationSetSelectedTaskId(t))},onContextMenu:function(t){var e=this;t.preventDefault(),t.stopPropagation(),this.$nextTick((function(){e.navigationShowTaskMenuContext({x:t.clientX,y:t.clientY})}))}})},Co=Io,Oo=Object(r["a"])(Co,yo,ko,!1,null,null,null),To=Oo.exports,Po=To,Ao=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("g",{attrs:{visibility:t.agvTask.hidden?"hidden":"visible"}},[n("defs",[n("marker",{attrs:{id:"arrowhead",markerWidth:"3",markerHeight:"2",refX:"1",refY:"1",orient:"auto"}},[n("polygon",{staticStyle:{fill:"limegreen"},attrs:{points:"0 0, 3 1, 0 2"}})])]),n("line",{attrs:{x1:t.agvTask.position.x,y1:t.agvTask.position.y,x2:t.agvTask.position.x+50*Math.cos(t.agvTask.thetaEnd*Math.PI/180),y2:t.agvTask.position.y-50*Math.sin(t.agvTask.thetaEnd*Math.PI/180),stroke:"limegreen","stroke-width":"10","marker-end":"url(#arrowhead)"},on:{mousedown:t.onMouseDown,touchstart:t.onMouseDown}})])},_o=[],Vo=Object(V["a"])("agvJobs"),Wo=Vo.mapState,Do=Object(V["a"])("navigation"),Lo=Do.mapState,Ro=Do.mapActions,Yo={name:"AgvrEndTaskDirection",computed:Object(_["a"])(Object(_["a"])({},Lo({navigationJobId:function(t){return t.jobId},navigationTaskId:function(t){return t.taskId},isContextMenuShow:function(t){return t.taskMenuContext.isShow||t.agvMenuContext.isShow||t.agvInitPoseMenuContext.isShow}})),Wo({agvTask:function(t){var e=this,n=t.find((function(t){return t.id===e.navigationJobId}));if(null==n||0==n.tasks.length)return{position:{x:0,y:0,z:0},thetaEnd:0,hidden:!0};var i=n.tasks.find((function(t){return t.id===e.navigationTaskId}));return null!=i?i:{position:{x:0,y:0,z:0},thetaEnd:0,hidden:!0}}})),methods:Object(_["a"])(Object(_["a"])({},Ro({navigationDisableMapPanZoom:"disableMapPanZoom",navigationSelectedTaskThetaEnd:"selectedTaskThetaEnd"})),{},{onMouseDown:function(){this.isContextMenuShow||(this.navigationDisableMapPanZoom(),this.navigationSelectedTaskThetaEnd())}})},Eo=Yo,Xo=Object(r["a"])(Eo,Ao,_o,!1,null,null,null),Ho=Xo.exports,Jo=Ho,Bo=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-navigation-drawer",{style:{boxShadow:"none"},attrs:{absolute:"",temporary:"",right:"",width:"500"},model:{value:t.isShow,callback:function(e){t.isShow=e},expression:"isShow"}},[n("v-container",{staticClass:"pa-0",attrs:{fluid:""}},[n("v-row",{staticClass:"flex-shrink-1"},[n("v-col",[n("v-stepper",{staticClass:"action-management-stepper",attrs:{vertical:""},model:{value:t.step,callback:function(e){t.step=e},expression:"step"}},[t._l(t.actionCollection,(function(e,i){return[n("div",{key:"step-"+e.step,on:{contextmenu:function(e){return t.openMenuContext(e,i)}}},[n("v-stepper-step",{attrs:{step:e.step,"edit-icon":"mdi-puzzle-edit-outline",complete:"",editable:""}},[t._v(" "+t._s(e.name)+" ")])],1),n("v-stepper-content",{key:"stepper-content-"+e.step,attrs:{step:e.step}},[n("v-container",{staticClass:"pa-0",attrs:{fluid:""}},[n("v-text-field",{staticClass:"mt-2",attrs:{label:"Step name","append-icon":"mdi-square-edit-outline",outlined:"",dense:""},model:{value:e.name,callback:function(n){t.$set(e,"name",n)},expression:"stepItem.name"}}),n("v-combobox",{attrs:{label:"Action",items:t.actionLists,dense:"","hide-details":"",outlined:""},scopedSlots:t._u([{key:"selection",fn:function(e){var i=e.item;return[n("span",{staticClass:"pr-2"},[t._v(" "+t._s(t.actionTextLists[i])+" ")])]}},{key:"item",fn:function(e){var i=e.item;return[n("span",{staticClass:"pr-2"},[t._v(" "+t._s(t.actionTextLists[i])+" ")])]}}],null,!0),model:{value:e.action,callback:function(n){t.$set(e,"action",n)},expression:"stepItem.action"}})],1)],1)]})),n("div",{on:{contextmenu:function(t){return t.preventDefault()}}},[n("v-stepper-step",{attrs:{step:-1,"edit-icon":"mdi-plus",complete:"",editable:""},on:{click:t.addLastStep}})],1)],2)],1)],1),n("v-row",[n("v-spacer"),n("v-col",{staticClass:"px-6",attrs:{cols:"auto"}},[n("v-btn",{attrs:{depressed:"",color:"primary"},domProps:{textContent:t._s("Save")},on:{click:t.onSave}})],1)],1)],1),n("v-menu",{attrs:{"position-x":t.menuX,"position-y":t.menuY,absolute:"","offset-y":""},model:{value:t.isShowMenu,callback:function(e){t.isShowMenu=e},expression:"isShowMenu"}},[n("v-list",[n("v-list-item",{on:{click:t.addAboveStep}},[n("v-list-item-icon",[n("v-icon",[t._v("mdi-plus")])],1),n("v-list-item-title",{domProps:{textContent:t._s("Above")}})],1),n("v-list-item",{on:{click:t.addBelowStep}},[n("v-list-item-icon",[n("v-icon",[t._v("mdi-plus")])],1),n("v-list-item-title",{domProps:{textContent:t._s("Below")}})],1),n("v-list-item",{on:{click:t.deleteStep}},[n("v-list-item-icon",[n("v-icon",[t._v("mdi-delete")])],1),n("v-list-item-title",{domProps:{textContent:t._s("Delete")}})],1)],1)],1)],1)},zo=[],Zo={name:"AgvrActionManagement",data:function(){var t;return{step:-1,actionLists:[pn.Nothing,pn.PlugCharger,pn.UnplugCharger,pn.LiftUp,pn.LiftDown],actionTextLists:(t={},Object(sn["a"])(t,pn.Nothing,"Do nothing"),Object(sn["a"])(t,pn.PlugCharger,"Plug charge"),Object(sn["a"])(t,pn.UnplugCharger,"Unplug charge"),Object(sn["a"])(t,pn.LiftUp,"Lift up"),Object(sn["a"])(t,pn.LiftDown,"Lift down"),t),actionCollection:[],isShowMenu:!1,menuX:0,menuY:0,selectedStep:-1}},methods:Object(_["a"])(Object(_["a"])({},Object(V["c"])({navigationShowActionManagement:"navigation/showActionManagement",navigationHideActionManagement:"navigation/hideActionManagement",updateActionsOfSelectedTask:"updateActionsOfSelectedTask"})),{},{openMenuContext:function(t,e){var n=this;this.selectedStep=e,t.preventDefault(),this.isShowMenu=!1,this.menuX=t.clientX,this.menuY=t.clientY,this.$nextTick((function(){n.isShowMenu=!0}))},addAboveStep:function(){this.selectedStep<0||this.actionCollection.splice(this.selectedStep,0,{step:cn["b"].v4(),name:"New step",action:this.actionLists[0]})},addBelowStep:function(){this.selectedStep<0||this.actionCollection.splice(this.selectedStep+1,0,{step:cn["b"].v4(),name:"New step",action:this.actionLists[0]})},deleteStep:function(){this.selectedStep<0||(this.actionCollection.splice(this.selectedStep,1),this.step=-1)},addLastStep:function(){this.actionCollection.push({step:cn["b"].v4(),name:"New step",action:this.actionLists[0]})},onSave:function(){console.log(this.actionCollection),this.updateActionsOfSelectedTask({actions:this.actionCollection})}}),computed:Object(_["a"])(Object(_["a"])(Object(_["a"])({},Object(V["e"])({navigationActionManagementShow:function(t){return t.navigation.actionManagement.isShow}})),Object(V["d"])({getListActionOfSelectedTask:"getListActionOfSelectedTask"})),{},{isShow:{get:function(){return this.navigationActionManagementShow},set:function(t){t?this.navigationShowActionManagement():this.navigationHideActionManagement()}}}),watch:{isShowMenu:function(t){0==t&&(this.selectedStep=-1)},isShow:function(t){t?this.actionCollection=this.getListActionOfSelectedTask():(this.actionCollection=[],this.step=-1)}}},$o=Zo,No=(n("56a8"),Object(r["a"])($o,Bo,zo,!1,null,"41f11650",null)),Uo=No.exports;M()(No,{VBtn:$t["a"],VCol:mt["a"],VCombobox:yn["a"],VContainer:Lt["a"],VIcon:Z["a"],VList:ot["a"],VListItem:st["a"],VListItemIcon:rt["a"],VListItemTitle:ct["b"],VMenu:kn["a"],VNavigationDrawer:lt["a"],VRow:Gt["a"],VSpacer:$["a"],VStepper:wn["a"],VStepperContent:xn["a"],VStepperStep:Mn["a"],VTextField:qt["a"]});var Fo=Uo,Go=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"agv-joystick",style:{height:t.joystickHeight+"px",width:t.joystickWidth+"px"}},[n("div",{staticClass:"agv-joystick-point",style:{top:t.joystickHandleTop+"px",left:t.joystickHandleLeft+"px",height:t.joystickHandleHeight+"px",width:t.joystickHandleWidth+"px"},on:{mousedown:function(){return t.joystickClicked=!0},mouseup:function(){return t.joystickClicked=!1},mouseleave:function(){return t.joystickClicked=!1},mousemove:function(e){return t.joystickMove(e.movementX,e.movementY)},touchstart:t.joystickTouchStart,touchend:t.joystickTouchEnd,touchmove:t.onTouchMove}})])},qo=[],Qo=Object(V["a"])("navigation"),Ko=Qo.mapState,ts={name:"AgvrJoyStickButton",data:function(){return{joystickClicked:!1,joystickHandleTop:0,joystickHandleLeft:0,touchClientX:-1,touchClientY:-1}},props:{width:{type:Number,default:null},height:{type:Number,default:null},handleWidth:{type:Number,default:null},handleHeight:{type:Number,default:null}},computed:Object(_["a"])(Object(_["a"])({},Ko({navigationAgvId:function(t){return t.agvId}})),{},{joystickStyle:function(){return{height:this.height?"".concat(this.height,"px"):null,width:this.width?"".concat(this.width,"px"):null}},joystickWidth:function(){return this.width?this.width:200},joystickHeight:function(){return this.height?this.height:200},joystickHandleWidth:function(){return this.handleWidth?this.handleWidth:80},joystickHandleHeight:function(){return this.handleHeight?this.handleHeight:80},joystickHandleX:function(){return(this.joystickWidth-this.joystickHandleWidth)/2},joystickHandleY:function(){return(this.joystickHeight-this.joystickHandleHeight)/2}}),mounted:function(){this.joystickResetPosition()},methods:{joystickMove:function(t,e){if(this.joystickClicked){var n=this.joystickHandleTop+e+this.joystickHandleHeight/2-this.joystickHeight/2,i=this.joystickHandleLeft+t+this.joystickHandleWidth/2-this.joystickWidth/2,a=Math.sqrt(Math.pow(i,2)+Math.pow(n,2));a<=this.joystickHandleX&&a<=this.joystickHandleY&&(this.joystickHandleTop+=e,this.joystickHandleLeft+=t,this.$agvr.robots[this.navigationAgvId].pushCmdvel(_n.controlMetaToTwistMessage({x:i/this.joystickHandleX,y:-n/this.joystickHandleY})))}},joystickResetPosition:function(){this.joystickHandleTop=this.joystickHandleX,this.joystickHandleLeft=this.joystickHandleY,this.$agvr.robots[this.navigationAgvId].pushCmdvel(_n.controlMetaToTwistMessage({x:0,y:0}))},joystickTouchStart:function(t){var e=t.changedTouches[0];this.touchClientX=e.clientX,this.touchClientY=e.clientY,this.joystickClicked=!0},joystickTouchEnd:function(){this.touchClientX=-1,this.touchClientY=-1,this.joystickClicked=!1},onTouchMove:function(t){if(t.preventDefault(),this.touchClientX>0&&this.touchClientY>0){var e=t.changedTouches[0];this.joystickMove(e.clientX-this.touchClientX,e.clientY-this.touchClientY),this.touchClientX=e.clientX,this.touchClientY=e.clientY}}},watch:{joystickClicked:function(t,e){t==e||t||this.joystickResetPosition()}}},es=ts,ns=(n("4cf8"),Object(r["a"])(es,Go,qo,!1,null,"0771c95e",null)),is=ns.exports,as=is,os=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"agv-movement",style:t.movementStyle,on:{contextmenu:t.onContextMenu}},[n("v-row",{staticClass:"agv-movement-row",style:t.rowStyle},[n("v-col"),n("v-col",{staticClass:"agv-movement-forward",attrs:{align:"center",justify:"space-around"}},[n("v-btn",{staticClass:"agv-movement-button",attrs:{icon:""},on:{mousedown:function(e){return t.move({x:0,y:1})},mouseup:function(e){return t.move({x:0,y:0})},mouseout:function(e){return t.move({x:0,y:0})}}},[n("v-icon",[t._v("mdi-chevron-up")])],1)],1),n("v-col")],1),n("v-row",{staticClass:"agv-movement-row",style:t.rowStyle},[n("v-col",{staticClass:"agv-movement-left",attrs:{align:"center",justify:"space-around"}},[n("v-btn",{staticClass:"agv-movement-button",attrs:{icon:""},on:{mousedown:function(e){return t.move({x:-1,y:0})},mouseup:function(e){return t.move({x:0,y:0})},mouseout:function(e){return t.move({x:0,y:0})}}},[n("v-icon",[t._v("mdi-chevron-left")])],1)],1),n("v-col"),n("v-col",{staticClass:"agv-movement-right",attrs:{align:"center",justify:"center"}},[n("v-btn",{staticClass:"agv-movement-button",attrs:{icon:""},on:{mousedown:function(e){return t.move({x:1,y:0})},mouseup:function(e){return t.move({x:0,y:0})},mouseout:function(e){return t.move({x:0,y:0})}}},[n("v-icon",[t._v("mdi-chevron-right")])],1)],1)],1),n("v-row",{staticClass:"agv-movement-row",style:t.rowStyle},[n("v-col"),n("v-col",{staticClass:"agv-movement-backward",attrs:{align:"center",justify:"space-around"}},[n("v-btn",{staticClass:"agv-movement-button",attrs:{icon:""},on:{mousedown:function(e){return t.move({x:0,y:-1})},mouseup:function(e){return t.move({x:0,y:0})},mouseout:function(e){return t.move({x:0,y:0})}}},[n("v-icon",[t._v("mdi-chevron-down")])],1)],1),n("v-col")],1)],1)},ss=[],cs=Object(V["a"])("navigation"),rs=cs.mapState,ls={name:"AgvrMovementButton",props:{width:{type:Number,default:null},height:{type:Number,default:null}},computed:Object(_["a"])(Object(_["a"])({},rs({navigationAgvId:function(t){return t.agvId}})),{},{movementStyle:function(){return{height:this.height?"".concat(this.height,"px"):null,width:this.width?"".concat(this.width,"px"):null}},rowStyle:function(){return{height:this.height?"".concat(this.height/3,"px"):null,width:this.width?"".concat(this.width,"px"):null}}}),methods:{move:function(t){this.$agvr.robots[this.navigationAgvId].pushCmdvel(_n.controlMetaToTwistMessage(t))},onContextMenu:function(t){t.preventDefault(),t.stopPropagation()}}},us=ls,vs=(n("b228"),Object(r["a"])(us,os,ss,!1,null,"29211552",null)),ds=vs.exports;M()(vs,{VBtn:$t["a"],VCol:mt["a"],VIcon:Z["a"],VRow:Gt["a"]});var hs=ds,ps=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-menu",{attrs:{"position-x":t.navigationAgvMenuContext.position.x,"position-y":t.navigationAgvMenuContext.position.y,absolute:"","offset-y":"",rounded:"0"},model:{value:t.isShow,callback:function(e){t.isShow=e},expression:"isShow"}},[n("v-list",{attrs:{dense:""}},[n("v-list-item-group",{staticClass:"pa-0",attrs:{color:"primary"}},[n("v-list-item",{on:{click:t.onCreateGoal}},[n("v-list-item-icon",[n("v-icon",[t._v("mdi-map-marker-plus")])],1),n("v-list-item-content",[n("v-list-item-title",{domProps:{textContent:t._s("Create goal")}})],1)],1),n("v-list-item",{on:{click:t.onRun}},[n("v-list-item-icon",[n("v-icon",[t._v("mdi-play")])],1),n("v-list-item-content",[n("v-list-item-title",{domProps:{textContent:t._s("Run")}})],1)],1)],1)],1)],1)},gs=[],ms=Object(V["a"])("navigation"),fs=ms.mapState,bs=ms.mapActions,ys=Object(V["a"])("agvs"),ks=ys.mapState,ws=Object(V["a"])("agvJobs"),xs=ws.mapActions,Ms=ws.mapGetters,js={name:"AgvrRobotNavigationMenuContext",computed:Object(_["a"])(Object(_["a"])(Object(_["a"])(Object(_["a"])({},fs({navigationAgvMenuContext:function(t){return t.agvMenuContext},navigationAgvId:function(t){return t.agvId}})),Ms({getLastTask:"getLastTask"})),ks({agvJobId:function(t){var e=this,n=t.find((function(t){return t.id===e.navigationAgvId}));return null!=n?n.jobId:null},agvWebPose:function(t){var e=this,n=t.find((function(t){return t.id===e.navigationAgvId}));return null!=n?n.webPose:null}})),{},{isShow:{get:function(){return this.navigationAgvMenuContext.isShow},set:function(t){t?this.navigationShowAgvMenuContext():this.navigationHideAgvMenuContext()}}}),methods:Object(_["a"])(Object(_["a"])(Object(_["a"])({},bs({navigationHideAgvMenuContext:"hideAgvMenuContext",navigationShowAgvMenuContext:"showAgvMenuContext"})),xs({pushTaskToJob:"pushTaskToJob"})),{},{onCreateGoal:function(){var t=null,e=this.getLastTask(this.agvJobId);t=null!=e?{x:e.position.x+100*Math.cos(e.thetaEnd*Math.PI/180),y:e.position.y-100*Math.sin(e.thetaEnd*Math.PI/180)}:{x:this.agvWebPose.position.x+100*Math.cos(this.agvWebPose.orientation.z*Math.PI/180),y:this.agvWebPose.position.y-100*Math.sin(this.agvWebPose.orientation.z*Math.PI/180)},null!=t&&this.pushTaskToJob({jobId:this.agvJobId,x:t.x,y:t.y})},onRun:function(){this.$agvr.robots[this.navigationAgvId].runJob()}})},Ss=js,Is=n("1baa"),Cs=Object(r["a"])(Ss,ps,gs,!1,null,null,null),Os=Cs.exports;M()(Cs,{VIcon:Z["a"],VList:ot["a"],VListItem:st["a"],VListItemContent:ct["a"],VListItemGroup:Is["a"],VListItemIcon:rt["a"],VListItemTitle:ct["b"],VMenu:kn["a"]});var Ts=Os,Ps=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-menu",{attrs:{"position-x":t.navigationAgvInitPoseMenuContext.position.x,"position-y":t.navigationAgvInitPoseMenuContext.position.y,absolute:"","offset-y":"",rounded:"0"},model:{value:t.isShow,callback:function(e){t.isShow=e},expression:"isShow"}},[n("v-list",{attrs:{dense:""}},[n("v-list-item-group",{staticClass:"pa-0",attrs:{color:"primary"}},[n("v-list-item",{on:{click:t.onInitializePose}},[n("v-list-item-icon",[n("v-icon",{domProps:{textContent:t._s("mdi-play")}})],1),n("v-list-item-content",[n("v-list-item-title",{domProps:{textContent:t._s("Initialize pose")}})],1)],1)],1)],1)],1)},As=[],_s=Object(V["a"])("navigation"),Vs=_s.mapState,Ws=_s.mapActions,Ds={name:"AgvrRobotInitPoseMenuContext",computed:Object(_["a"])(Object(_["a"])({},Vs({navigationAgvInitPoseMenuContext:function(t){return t.agvInitPoseMenuContext},navigationAgvId:function(t){return t.agvId}})),{},{isShow:{get:function(){return this.navigationAgvInitPoseMenuContext.isShow},set:function(t){t?this.navigationShowAgvInitPoseMenuContext():this.navigationHideAgvInitPoseMenuContext()}}}),methods:Object(_["a"])(Object(_["a"])({},Ws({navigationShowAgvInitPoseMenuContext:"showAgvInitPoseMenuContext",navigationHideAgvInitPoseMenuContext:"hideAgvInitPoseMenuContext",setNavigationState:"setNavigationState"})),{},{onInitializePose:function(){this.$agvr.robots[this.navigationAgvId].initializePose(),this.$router.push("/navigation")}})},Ls=Ds,Rs=Object(r["a"])(Ls,Ps,As,!1,null,null,null),Ys=Rs.exports;M()(Rs,{VIcon:Z["a"],VList:ot["a"],VListItem:st["a"],VListItemContent:ct["a"],VListItemGroup:Is["a"],VListItemIcon:rt["a"],VListItemTitle:ct["b"],VMenu:kn["a"]});var Es=Ys,Xs=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-menu",{attrs:{"position-x":t.navigationTaskMenuContext.position.x,"position-y":t.navigationTaskMenuContext.position.y,absolute:"","offset-y":"",rounded:"0"},model:{value:t.isShow,callback:function(e){t.isShow=e},expression:"isShow"}},[n("v-list",{attrs:{dense:""}},[n("v-list-item-group",{staticClass:"pa-0",attrs:{color:"primary"}},[n("v-list-item",{on:{click:t.openActionManagement}},[n("v-list-item-icon",[n("v-icon",[t._v("mdi-clipboard-list-outline")])],1),n("v-list-item-content",[n("v-list-item-title",[t._v("Actions")])],1)],1),n("v-list-item",{on:{click:t.insertBefore}},[n("v-list-item-icon",[n("v-icon",[t._v("mdi-table-column-plus-before")])],1),n("v-list-item-content",[n("v-list-item-title",[t._v("Add before")])],1)],1),n("v-list-item",{on:{click:t.insertAfter}},[n("v-list-item-icon",[n("v-icon",[t._v("mdi-table-column-plus-after")])],1),n("v-list-item-content",[n("v-list-item-title",[t._v("Add after")])],1)],1),n("v-list-item",{on:{click:t.removeTask}},[n("v-list-item-icon",[n("v-icon",[t._v("mdi-delete")])],1),n("v-list-item-content",[n("v-list-item-title",[t._v("Delete")])],1)],1)],1)],1)],1)},Hs=[],Js=Object(V["a"])("navigation"),Bs=Js.mapState,zs=Js.mapActions,Zs=Object(V["a"])("agvJobs"),$s=Zs.mapActions,Ns=Object(V["a"])("agvs"),Us=Ns.mapState,Fs={name:"AgvrTaskMenuContext",computed:Object(_["a"])(Object(_["a"])(Object(_["a"])({},Bs({navigationTaskMenuContext:function(t){return t.taskMenuContext},navigationJobId:function(t){return t.jobId},navigationTaskId:function(t){return t.taskId},navigationAgvId:function(t){return t.agvId}})),Us({agvPosition:function(t){return t[this.navigationAgvId].webPose.position}})),{},{isShow:{get:function(){return this.navigationTaskMenuContext.isShow},set:function(t){t?this.navigationShowTaskMenuContext():this.navigationHideTaskMenuContext()}}}),methods:Object(_["a"])(Object(_["a"])(Object(_["a"])({},$s({insertTaskAfterToJob:"insertTaskAfterToJob",insertTaskBeforeToJob:"insertTaskBeforeToJob",removeTaskFromJob:"removeTaskFromJob"})),zs({navigationShowTaskMenuContext:"showTaskMenuContext",navigationHideTaskMenuContext:"hideTaskMenuContext",navigationShowActionManagement:"showActionManagement"})),{},{openActionManagement:function(){this.navigationShowActionManagement()},insertAfter:function(){this.insertTaskAfterToJob({jobId:this.navigationJobId,taskId:this.navigationTaskId})},insertBefore:function(){this.insertTaskBeforeToJob({jobId:this.navigationJobId,taskId:this.navigationTaskId,agvPosition:this.agvPosition})},removeTask:function(){this.removeTaskFromJob({jobId:this.navigationJobId,taskId:this.navigationTaskId})}})},Gs=Fs,qs=Object(r["a"])(Gs,Xs,Hs,!1,null,null,null),Qs=qs.exports;M()(qs,{VIcon:Z["a"],VList:ot["a"],VListItem:st["a"],VListItemContent:ct["a"],VListItemGroup:Is["a"],VListItemIcon:rt["a"],VListItemTitle:ct["b"],VMenu:kn["a"]});var Ks=Qs,tc=Object(V["a"])("navigation"),ec=tc.mapState,nc=tc.mapActions,ic=Object(V["a"])("agvMaps"),ac=ic.mapState,oc=Object(V["a"])("agvJobs"),sc=oc.mapActions,cc={name:"AgvNavigation",components:{AgvrRobot:ro,AgvrEndTaskDirection:Jo,AgvrMapImage:Ea,WayAgvToTaskPosition:Ga,WayFromTaskToTask:bo,AgvrTasksOnMap:Po,AgvrRobotNavigationMenuContext:Ts,AgvrTaskMenuContext:Ks,AgvrActionManagement:Fo,AgvrJoyStickButton:as,AgvrMovementButton:hs},props:{map:{type:String,default:""}},data:function(){return{graphicID:"agv-map-zoompan-".concat(cn["b"].v4()),panZoom:null,touchClientX:-1,touchClientY:-1,sgvWidth:0,sgvHeight:0}},computed:Object(_["a"])(Object(_["a"])({},ec({navigationMapId:function(t){return t.mapId},navigationJobId:function(t){return t.jobId},navigationTaskId:function(t){return t.taskId},navigationAgvId:function(t){return t.agvId},navigationMapPanZoomEnable:function(t){return t.mapPanZoomEnable},navigationSelectionType:function(t){return t.selectionType},viewWidth:function(t){return t.viewWidth},viewHeight:function(t){return t.viewHeight},joystickButtonState:function(t){return t.joystickButton.isShow},movementButtonState:function(t){return t.movementButton.isShow}})),ac({agvMapImage:function(t){var e=this,n=t.find((function(t){return t.id===e.navigationMapId}));return null!=n?n.webMap.Image:null},agvIdsOnMap:function(t){var e=this,n=t.find((function(t){return t.id===e.navigationMapId}));return null!=n?n.agvIds:[]},agvJobsIdOnMap:function(t){var e=this,n=t.find((function(t){return t.id===e.navigationMapId}));return null!=n?n.jobIds:[]},agvMapResolution:function(t){var e=this,n=t.find((function(t){return t.id===e.navigationMapId}));return null!=n?n.rosMap.info.resolution:1},agvMapScale:function(t){var e=this,n=t.find((function(t){return t.id===e.navigationMapId}));return null!=n?n.webMap.scale:1}})),methods:Object(_["a"])(Object(_["a"])(Object(_["a"])({},sc(["pushTaskToJob","moveTaskPosition","setThetaEndOfTask"])),nc({navigationSubscribePose:"subscribePose",navigationUnsubscribePose:"unsubscribePose"})),{},{onPanZoomDoubleClick:function(t){var e=this.panZoom.getTransform(),n={x:(t.layerX-e.x)/e.scale,y:(t.layerY-e.y)/e.scale};n.x>=e.x&&n.x<=e.x+this.sgvWidth&&n.y>=e.y&&n.y<=e.y+this.sgvHeight&&this.pushTaskToJob({jobId:this.navigationJobId,x:n.x,y:n.y})},onInitZoomPan:function(t){this.panZoom=t},onMouseMove:function(t){var e=this.panZoom.getTransform();switch(this.navigationSelectionType){case 1:this.moveTaskPosition({jobId:this.navigationJobId,taskId:this.navigationTaskId,movementX:t.movementX/e.scale,movementY:t.movementY/e.scale});break;case 2:this.setThetaEndOfTask({jobId:this.navigationJobId,taskId:this.navigationTaskId,mouse:{x:(t.layerX-e.x)/e.scale,y:(t.layerY-e.y)/e.scale}});break}},onTouchStart:function(t){var e=t.changedTouches[0];this.touchClientX=e.clientX,this.touchClientY=e.clientY},onTouchEnd:function(){this.touchClientX=-1,this.touchClientY=-1},onTouchMove:function(t){if(t.preventDefault(),this.touchClientX>0&&this.touchClientY>0){var e=t.changedTouches[0];this.onMouseMove({movementX:e.clientX-this.touchClientX,movementY:e.clientY-this.touchClientY,layerX:e.clientX,layerY:e.clientY}),this.touchClientX=e.clientX,this.touchClientY=e.clientY}},onContextMenu:function(t){t.preventDefault(),t.stopPropagation()}}),watch:{navigationMapPanZoomEnable:function(t){t?this.panZoom.isPaused()&&this.panZoom.resume():this.panZoom.isPaused()||this.panZoom.pause()},agvMapImage:function(t){null!=t&&(this.sgvWidth=t.width,this.sgvHeight=t.height)}},mounted:function(){this.navigationSubscribePose(),null!=this.agvMapImage&&(this.sgvWidth=this.agvMapImage.width,this.sgvHeight=this.agvMapImage.height)},beforeDestroy:function(){this.navigationUnsubscribePose()}},rc=cc,lc=(n("094b"),Object(r["a"])(rc,Ta,Pa,!1,null,"17c27f10",null)),uc=lc.exports;M()(lc,{VContainer:Lt["a"]});var vc=uc,dc=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-container",{staticClass:"pa-0 agv-navigation",attrs:{fluid:""}},[n("panZoom",{staticClass:"panzoom-map-initialize-pose-viewer",attrs:{selector:"#"+t.graphicID,options:{minZoom:.5,maxZoom:5,zoomSpeed:.05,zoomDoubleClickSpeed:1,onDoubleClick:t.onPanZoomDoubleClick,autocenter:!0}},on:{init:t.onInitZoomPan}},[n("svg",{staticClass:"map-viewer-svg",attrs:{xmlns:"http://www.w3.org/2000/svg",height:t.sgvHeight,width:t.sgvWidth,id:t.graphicID},on:{mousemove:t.onMouseMove,contextmenu:t.onContextMenu}},[n("g",{on:{touchstart:t.onTouchStart,touchmove:t.onTouchMove,touchend:t.onTouchEnd}},[n("AgvrMapImage",{attrs:{mapId:t.navigationMapId}}),n("AgvrRobotDirection",{attrs:{agvId:t.navigationAgvId}}),n("AgvrRobot",{attrs:{selectable:!0,agvId:t.navigationAgvId,agvMapResolution:t.agvMapResolution,agvMapScale:t.agvMapScale}})],1)])]),n("AgvrRobotInitPoseMenuContext")],1)},hc=[],pc=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("g",[n("defs",[n("marker",{attrs:{id:"arrowhead",markerWidth:"3",markerHeight:"2",refX:"1",refY:"1",orient:"auto"}},[n("polygon",{staticStyle:{fill:"limegreen"},attrs:{points:"0 0, 3 1, 0 2"}})])]),n("line",{attrs:{x1:t.agvWebPose.position.x,y1:t.agvWebPose.position.y,x2:t.agvWebPose.position.x+100*Math.cos(t.agvWebPose.orientation.z*Math.PI/180),y2:t.agvWebPose.position.y-100*Math.sin(t.agvWebPose.orientation.z*Math.PI/180),stroke:"limegreen","stroke-width":"10","marker-end":"url(#arrowhead)"},on:{mousedown:t.selectedRobotDirection,touchstart:t.selectedRobotDirection}})])},gc=[],mc=Object(V["a"])("agvs"),fc=mc.mapState,bc=Object(V["a"])("navigation"),yc=bc.mapState,kc=bc.mapActions,wc={name:"AgvrRobotDirection",props:{agvId:{type:String,default:""}},computed:Object(_["a"])(Object(_["a"])({},fc({agvWebPose:function(t){var e=this,n=t.find((function(t){return t.id===e.agvId}));return null!=n?n.webPose:{position:{x:0,y:0,z:0},orientation:{x:0,y:0,z:0}}}})),yc({isContextMenuShow:function(t){return t.taskMenuContext.isShow||t.agvMenuContext.isShow||t.agvInitPoseMenuContext.isShow}})),methods:Object(_["a"])(Object(_["a"])({},kc({navigationDisableMapPanZoom:"disableMapPanZoom",navigationSelectedRobotDirection:"selectedRobotDirection"})),{},{selectedRobotDirection:function(){this.isContextMenuShow||(this.navigationDisableMapPanZoom(),this.navigationSelectedRobotDirection())}})},xc=wc,Mc=Object(r["a"])(xc,pc,gc,!1,null,null,null),jc=Mc.exports,Sc=jc,Ic=Object(V["a"])("navigation"),Cc=Ic.mapState,Oc=Object(V["a"])("agvMaps"),Tc=Oc.mapState,Pc=Object(V["a"])("agvs"),Ac=Pc.mapActions,_c={name:"AgvInitializeNavigation",components:{AgvrRobot:ro,AgvrRobotDirection:Sc,AgvrMapImage:Ea,AgvrRobotInitPoseMenuContext:Es},data:function(){return{graphicID:"agv-map-zoompan-initialize-pose-".concat(cn["b"].v4()),panZoom:null,touchClientX:-1,touchClientY:-1,sgvWidth:0,sgvHeight:0}},computed:Object(_["a"])(Object(_["a"])(Object(_["a"])({},Cc({navigationMapId:function(t){return t.mapId},navigationAgvId:function(t){return t.agvId}})),Tc({agvMapImage:function(t){var e=this,n=t.find((function(t){return t.id===e.navigationMapId}));return null!=n?n.webMap.Image:null},agvMapResolution:function(t){var e=this,n=t.find((function(t){return t.id===e.navigationMapId}));return null!=n?n.rosMap.info.resolution:1},agvMapScale:function(t){var e=this,n=t.find((function(t){return t.id===e.navigationMapId}));return null!=n?n.webMap.scale:1}})),Object(V["e"])({navigationWebMap:function(t){return t.ros.maps[t.navigation.selectedMapId].webMap},viewWidth:function(t){return t.navigation.viewWidth},viewHeight:function(t){return t.navigation.viewHeight},navigationSelectionType:function(t){return t.navigation.selectionType},navigationMapPanZoomEnable:function(t){return t.navigation.mapPanZoomEnable}})),methods:Object(_["a"])(Object(_["a"])({},Ac({moveAgvPosition:"moveAgvPosition",changeAgvDirection:"changeAgvDirection"})),{},{onInitZoomPan:function(t){this.panZoom=t},onMouseMove:function(t){var e=this.panZoom.getTransform();switch(this.navigationSelectionType){case 3:this.moveAgvPosition({movementX:t.movementX/e.scale,movementY:t.movementY/e.scale,agvId:this.navigationAgvId});break;case 4:this.changeAgvDirection({mouse:{x:(t.layerX-e.x)/e.scale,y:(t.layerY-e.y)/e.scale},agvId:this.navigationAgvId});break}},onTouchStart:function(t){var e=t.changedTouches[0];this.touchClientX=e.clientX,this.touchClientY=e.clientY},onTouchEnd:function(){this.touchClientX=-1,this.touchClientY=-1},onTouchMove:function(t){if(t.preventDefault(),this.touchClientX>0&&this.touchClientY>0){var e=t.changedTouches[0];this.onMouseMove({movementX:e.clientX-this.touchClientX,movementY:e.clientY-this.touchClientY,layerX:e.clientX,layerY:e.clientY}),this.touchClientX=e.clientX,this.touchClientY=e.clientY}},onContextMenu:function(t){t.preventDefault(),t.stopPropagation()},onPanZoomDoubleClick:function(){}}),watch:{navigationMapPanZoomEnable:function(t){t?this.panZoom.isPaused()&&this.panZoom.resume():this.panZoom.isPaused()||this.panZoom.pause()},agvMapImage:function(t){null!=t&&(this.sgvWidth=t.width,this.sgvHeight=t.height)}},mounted:function(){null!=this.agvMapImage&&(this.sgvWidth=this.agvMapImage.width,this.sgvHeight=this.agvMapImage.height)}},Vc=_c,Wc=(n("457c"),Object(r["a"])(Vc,dc,hc,!1,null,"7b3ba241",null)),Dc=Wc.exports;M()(Wc,{VContainer:Lt["a"]});var Lc=Dc,Rc=[{path:"",component:Fe,meta:{title:"Overview"}},{path:"navigation",component:Fi,children:[{path:"/",component:vc,meta:{title:"Navigation"}},{path:"init",component:Lc,meta:{title:"Navigation Initialize Pose"}}]},{path:"settings",component:xa,meta:{title:"Setting"}},{path:"security",component:Oa,meta:{title:"Security"}}];i["default"].use(v["a"]);var Yc=new v["a"]({mode:"hash",base:"/",routes:[{path:"/",component:f,children:[{path:"introduce",component:Mt,children:Et,meta:{title:"Introduce"}},{path:"login",component:C,children:ee,meta:{title:"Login"}},{path:"logout",component:Tt,children:ue,meta:{title:"Logout"}},{path:"",component:Mt,children:Rc,meta:{title:"Dashboard"}}]}]});Yc.beforeEach((function(t,e,n){var a=i["default"].prototype.$store.state.account.token;null!=a&&a.length>0?"/login"===t.path?n("/"):(document.title=t.meta.title?t.meta.title:"AGV PRATI",n()):"/login"===t.path?n():n("/login")}));var Ec=Yc,Xc={},Hc={setProperty:function(t,e){t.commit("setProperty",e)},insertTaskAfterToJob:function(t){t.commit("insertTaskAfterToJob")},insertTaskBeforeToJob:function(t){t.commit("insertTaskBeforeToJob")},removeSelectedTaskFromJob:function(t){t.commit("removeSelectedTaskFromJob")},remoceTaskFromSelectedJob:function(t,e){t.commit("remoceTaskFromSelectedJob",e)},setThetaEndOfSelectedTask:function(t,e){t.commit("setThetaEndOfSelectedTask",e)},moveSelectedAgv:function(t,e){t.commit("moveSelectedAgv",e)},changeSelectedAgvDirection:function(t,e){t.commit("changeSelectedAgvDirection",e)},moveSelectedAgvToCenterMap:function(t){t.commit("moveSelectedAgvToCenterMap")},setSelectedAgvPosition:function(t,e){t.commit("setSelectedAgvPosition",e)},setSelectedAgvDirection:function(t,e){t.commit("setSelectedAgvDirection",e)},addGoalToCar:function(t){t.commit("addGoalToCar")},setSelectedAgvStatus:function(t,e){t.commit("setSelectedAgvStatus",e)},updateActionsOfSelectedTask:function(t,e){t.commit("updateActionsOfSelectedTask",e)}},Jc={getPoseStampedTaskOfSelectedJob:function(t){return function(e){var n=t.ros.jobs[t.navigation.selectedJobId];if(e<0||e>=n.tasks.length)return null;var i=t.ros.maps[t.navigation.selectedMapId],a=n.tasks[e];return{orientation:Vn.globalThetaToQuaternion(a.thetaEnd*Math.PI/180),position:{x:i.rosMap.info.origin.position.x+a.position.x*i.rosMap.info.resolution/i.webMap.scale,y:i.rosMap.info.origin.position.y-(a.position.y/i.webMap.scale-i.rosMap.info.height)*i.rosMap.info.resolution,z:0}}}},getListActionOfSelectedTask:function(t){return function(){if(t.navigation.selectedIndexTask<0)return[];var e=t.ros.jobs[t.navigation.selectedJobId].tasks;return t.navigation.selectedIndexTask>=e.length?[]:e[t.navigation.selectedIndexTask].actions}}},Bc={toggleNavigationMenu:function(t,e){t.commit("toggleNavigationMenu",e)}},zc={toggleNavigationMenu:function(t,e){t.isShowNavigationMenu=e}},Zc={isShowNavigationMenu:!1,navigationMenu:[{title:"Dashboard",icon:"mdi-view-dashboard",to:"/"},{title:"Navigation",icon:"mdi-near-me",to:"/navigation"},{title:"Setting",icon:"mdi-card-bulleted-settings",to:"/settings"},{title:"Introduce",icon:"mdi-view-carousel-outline",to:"/introduce"},{title:"Logout",icon:"mdi-logout-variant",to:"/logout"}]},$c={},Nc={rosConnected:!1},Uc={},Fc={},Gc={},qc={namespaced:!0,state:Nc,getters:Uc,mutations:Fc,actions:Gc},Qc={rosConnected:!1},Kc={},tr={setRosConnectionState:function(t,e){t.rosConnected=e}},er={rosConnected:function(t){t.commit("setRosConnectionState",!0)},rosDisconnected:function(t){t.commit("setRosConnectionState",!1)}},nr={namespaced:!0,state:Qc,getters:Kc,mutations:tr,actions:er},ir={overview:qc,agvnavigation:nr},ar={namespaced:!0,state:Zc,getters:$c,mutations:zc,actions:Bc,modules:ir},or={setSelectedTaskId:function(t,e){t.commit("setSelectedTaskId",e)},showTaskMenuContext:function(t,e){t.commit("showTaskMenuContext",e),t.commit("setMapPanZoomEnable",!1)},hideTaskMenuContext:function(t){t.commit("hideTaskMenuContext"),t.commit("setMapPanZoomEnable",!0)},showAgvMenuContext:function(t,e){t.commit("showAgvMenuContext",e),t.commit("setMapPanZoomEnable",!1)},hideAgvMenuContext:function(t){t.commit("hideAgvMenuContext"),t.commit("setMapPanZoomEnable",!0)},showAgvInitPoseMenuContext:function(t,e){t.commit("showAgvInitPoseMenuContext",e),t.commit("setMapPanZoomEnable",!1)},hideAgvInitPoseMenuContext:function(t){t.commit("hideAgvInitPoseMenuContext"),t.commit("setMapPanZoomEnable",!0)},selectedNone:function(t){t.commit("setSelectionType",-1)},selectedTaskPosition:function(t){t.commit("setSelectionType",1)},selectedTaskThetaEnd:function(t){t.commit("setSelectionType",2)},selectedRobot:function(t){t.commit("setSelectionType",3)},selectedRobotDirection:function(t){t.commit("setSelectionType",4)},enableMapPanZoom:function(t){t.commit("setMapPanZoomEnable",!0)},disableMapPanZoom:function(t){t.commit("setMapPanZoomEnable",!1)},showActionManagement:function(t){t.commit("showActionManagement")},hideActionManagement:function(t){t.commit("hideActionManagement")},showJoystickButton:function(t){t.commit("setJoystickButtonShowSate",!0)},hideJoystickButton:function(t){t.commit("setJoystickButtonShowSate",!1)},showMovementButton:function(t){t.commit("setMovementButtonShowSate",!0)},hideMovementButton:function(t){t.commit("setMovementButtonShowSate",!1)},changeWindowSize:function(t,e){t.commit("changeWindowSize",e)},setNavigationState:function(t,e){t.commit("setNavigationState",e)},subscribePose:function(t){return t.commit("subscribePose")},unsubscribePose:function(t){return t.commit("unsubscribePose")}},sr={setSelectedTaskId:function(t,e){t.taskId=e},showTaskMenuContext:function(t,e){t.taskMenuContext={position:{x:"number"===typeof e.x?e.x:0,y:"number"===typeof e.y?e.y:0},isShow:!0}},hideTaskMenuContext:function(t){t.taskMenuContext.isShow=!1},showAgvMenuContext:function(t,e){t.agvMenuContext={position:{x:"number"===typeof e.x?e.x:0,y:"number"===typeof e.y?e.y:0},isShow:!0}},hideAgvMenuContext:function(t){t.agvMenuContext.isShow=!1},showAgvInitPoseMenuContext:function(t,e){t.agvInitPoseMenuContext={position:{x:"number"===typeof e.x?e.x:0,y:"number"===typeof e.y?e.y:0},isShow:!0}},hideAgvInitPoseMenuContext:function(t){t.agvInitPoseMenuContext.isShow=!1},setSelectionType:function(t,e){Number.isInteger(e)&&(t.selectionType=e)},setMapPanZoomEnable:function(t,e){t.mapPanZoomEnable=e},showActionManagement:function(t){t.actionManagement.isShow=!0},hideActionManagement:function(t){t.actionManagement.isShow=!1},setJoystickButtonShowSate:function(t,e){t.joystickButton.isShow=e},setMovementButtonShowSate:function(t,e){t.movementButton.isShow=e},changeWindowSize:function(t,e){t.viewHeight=e.height,t.viewWidth=e.width},setNavigationState:function(t,e){t.navigationState=e},subscribePose:function(t){t.subscribePose=!0},unsubscribePose:function(t){t.subscribePose=!1}},cr={selectedMapId:"6defbba5-0f1f-4b43-a32e-a24247bac7d8",selectedAgvId:"8ee52be3-90d0-4ea9-8af5-b0c689a59030",selectedJobId:"cca29e49-d556-4c1a-af17-3f870b50ca06",selectionType:-1,selectedIndexTask:-1,mapPanZoomEnable:!0,taskMenuContext:{position:{x:0,y:0},isShow:!1},agvMenuContext:{position:{x:0,y:0},isShow:!1},agvInitPoseMenuContext:{position:{x:0,y:0},isShow:!1},actionManagement:{isShow:!1},joystickButton:{isShow:!1},movementButton:{isShow:!1},navigationState:"navigation",viewHeight:0,viewWidth:0,mapId:"6defbba5-0f1f-4b43-a32e-a24247bac7d8",jobId:"cca29e49-d556-4c1a-af17-3f870b50ca06",agvId:"8ee52be3-90d0-4ea9-8af5-b0c689a59030",taskId:"",subscribePose:!1},rr={},lr={namespaced:!0,state:cr,getters:rr,mutations:sr,actions:or},ur={},vr={},dr={settings:[{pathStore:["ros","agvs","8ee52be3-90d0-4ea9-8af5-b0c689a59030","properties"],text:"AGV",type:"group",settings:[{pathStore:["movementSpeed"],text:"Movement",type:"group",settings:[{pathStore:["x"],text:"X axit",type:"double",default:0,unit:"m/s",step:.1},{pathStore:["y"],text:"Y axit",type:"double",default:0,unit:"m/s",step:.1},{pathStore:["z"],text:"Z axit",type:"double",default:0,unit:"m/s",step:.1}]},{pathStore:["rotateSpeed"],text:"Rotate",type:"group",settings:[{pathStore:["x"],text:"X axit",type:"double",default:0,unit:"rad/s",step:.1},{pathStore:["y"],text:"Y axit",type:"double",default:0,unit:"rad/s",step:.1},{pathStore:["z"],text:"Z axit",type:"double",default:0,unit:"rad/s",step:.1}]}]}]},hr={},pr={namespaced:!0,state:dr,getters:hr,mutations:vr,actions:ur},gr={setToken:function(t,e){t.commit("setToken",e)}},mr={setToken:function(t,e){t.token=e,localStorage.setItem("agvr-account-token",e)}},fr={token:","},br={},yr={namespaced:!0,state:fr,getters:br,mutations:mr,actions:gr},kr={},wr=(n("d81d"),{setRosMap:function(t,e){var n=t.find((function(t){return t.id===e.id}));if(null!=n){n.rosMap=e.map;for(var i=n.webMap.scale,a=n.rosMap.info,o=n.rosMap.data,s=new ImageData(a.width*i,a.height*i),c=(a.height-1)*a.width,r=0;r<a.height;r++,c-=2*a.width)for(var l=0;l<a.width;l++,c++){var u=o[c];u=100===o[c]?0:0===o[c]?255:180;for(var v=4*(l*i+r*i*a.width*i),d=0;d<i;d++,v+=(a.width-1)*i*4)for(var h=0;h<i;h++)s.data[v++]=u,s.data[v++]=u,s.data[v++]=u,s.data[v++]=255}n.webMap.Image=s}},setConnectionState:function(t,e){var n=t.find((function(t){return t.id===e.id}));null!=n&&(n.rosConntectionState=e.isConnected)}}),xr=[{id:"6defbba5-0f1f-4b43-a32e-a24247bac7d8",rosMasterUri:"ws://192.168.10.100:9090",rosConntectionState:!1,rosMap:{data:[],header:{frame_id:"",seq:0,stamp:{nsecs:0,secs:0}},info:{width:0,height:0,resolution:1,origin:{orientation:{w:0,x:0,y:0,z:0},position:{x:0,y:0,z:0}},map_load_time:{nsecs:0,secs:0}}},webMap:{scale:4,Image:null},agvIds:["8ee52be3-90d0-4ea9-8af5-b0c689a59030"],jobIds:["cca29e49-d556-4c1a-af17-3f870b50ca06"]}],Mr={},jr={namespaced:!0,state:xr,getters:Mr,mutations:wr,actions:kr},Sr={pushTaskToJob:function(t,e){return t.commit("pushTaskToJob",e)},moveTaskPosition:function(t,e){return t.commit("moveTaskPosition",e)},setThetaEndOfTask:function(t,e){return t.commit("setThetaEndOfTask",e)},insertTaskAfterToJob:function(t,e){return t.commit("insertTaskAfterToJob",e)},insertTaskBeforeToJob:function(t,e){return t.commit("insertTaskBeforeToJob",e)},removeTaskFromJob:function(t,e){return t.commit("removeTaskFromJob",e)}},Ir=(n("c740"),{pushTaskToJob:function(t,e){var n=t.find((function(t){return t.id===e.jobId}));if(null!=n){var i=0;if(n.tasks.length>0){var a=n.tasks[n.tasks.length-1].position;i=180*Math.atan2(a.y-e.y,e.x-a.x)/Math.PI}var o=cn["b"].v4();while(o in n.tasks)o=cn["b"].v4();n.tasks.push({id:o,position:{x:e.x,y:e.y,z:0},thetaEnd:i,actions:[]})}},moveTaskPosition:function(t,e){if(!isNaN(e.movementX)&&!isNaN(e.movementY)){var n=t.find((function(t){return t.id===e.jobId}));if(null!=n){var i=n.tasks.find((function(t){return t.id===e.taskId}));if(null!=i){var a=i.position;i.position={x:a.x+e.movementX,y:a.y+e.movementY}}}}},setThetaEndOfTask:function(t,e){if(!isNaN(e.mouse.x)&&!isNaN(e.mouse.y)){var n=t.find((function(t){return t.id===e.jobId}));if(null!=n){var i=n.tasks.find((function(t){return t.id===e.taskId}));if(null!=i){var a=Math.atan2(i.position.y-e.mouse.y,e.mouse.x-i.position.x);i.thetaEnd=180*a/Math.PI}}}},insertTaskAfterToJob:function(t,e){var n=t.find((function(t){return t.id===e.jobId}));if(null!=n){var i=n.tasks.findIndex((function(t){return t.id===e.taskId}));if(!(i<0||i>=n.tasks.length-1)){var a={x:(n.tasks[i].position.x+n.tasks[i+1].position.x)/2,y:(n.tasks[i].position.y+n.tasks[i+1].position.y)/2},o=n.tasks[i].position;n.tasks.splice(i+1,0,{id:cn["b"].v4(),position:{x:a.x,y:a.y,z:0},thetaEnd:180*Math.atan2(o.y-a.y,a.x-o.x)/Math.PI,actions:[]})}}},insertTaskBeforeToJob:function(t,e){var n=t.find((function(t){return t.id===e.jobId}));if(null!=n){var i=n.tasks.findIndex((function(t){return t.id===e.taskId}));if(!(i>=n.tasks.length-1)){var a=null;a=0==i?e.agvPosition:n.tasks[i-1].position;var o={x:(a.x+n.tasks[i].position.x)/2,y:(a.y+n.tasks[i].position.y)/2};n.tasks.splice(i,0,{id:cn["b"].v4(),position:{x:o.x,y:o.y,z:0},thetaEnd:180*Math.atan2(a.y-o.y,o.x-a.x)/Math.PI,actions:[]})}}},removeTaskFromJob:function(t,e){var n=t.find((function(t){return t.id===e.jobId}));if(null!=n){var i=n.tasks.findIndex((function(t){return t.id===e.taskId}));i>=0&&i<n.tasks.length&&n.tasks.splice(i,1)}}}),Cr=[{id:"cca29e49-d556-4c1a-af17-3f870b50ca06",tasks:[]}],Or={getPoseStampedTask:function(t){return function(e){var n=t.find((function(t){return t.id===e.jobId}));if(null==n||0==n.tasks.length)return null;var i=null;return i=null==e.taskId?n.tasks[0]:n.tasks.find((function(t){return t.id===e.taskId})),null==i?null:(console.log(e),{orientation:Vn.globalThetaToQuaternion(i.thetaEnd*Math.PI/180),position:{x:e.mapRosInfo.origin.position.x+i.position.x*e.mapRosInfo.resolution/e.mapScale,y:e.mapRosInfo.origin.position.y-(i.position.y/e.mapScale-e.mapRosInfo.height)*e.mapRosInfo.resolution,z:0}})}},getLastTask:function(t){return function(e){var n=t.find((function(t){return t.id===e}));return null==n||0==n.tasks.length?null:n.tasks[n.tasks.length-1]}}},Tr={namespaced:!0,state:Cr,getters:Or,mutations:Ir,actions:Sr},Pr={moveAgvPosition:function(t,e){return t.commit("moveAgvPosition",e)},changeAgvDirection:function(t,e){return t.commit("changeAgvDirection",e)},setAgvDirection:function(t,e){return t.commit("setAgvDirection",e)},setAgvPosition:function(t,e){return t.commit("setAgvPosition",e)}},Ar={setConnectionState:function(t,e){var n=t.find((function(t){return t.id===e.agvId}));null!=n&&(n.rosConntectionState=e.isConnected)},setSim1000Pose:function(t,e){var n=t.find((function(t){return t.id===e.agvId}));null!=n&&0!=e.rosMap.info.height&&0!=e.rosMap.info.width&&(Math.abs(n.sim1000Pose.PoseX-e.pose.PoseX)<10&&Math.abs(n.sim1000Pose.PoseY-e.pose.PoseY)<10&&Math.abs(n.sim1000Pose.PoseYaw-e.pose.PoseYaw)<1e3||(n.sim1000Pose=e.pose,n.webPose={position:{x:(-e.rosMap.info.origin.position.x+e.pose.PoseX/1e3)/e.rosMap.info.resolution*e.mapScale,y:(e.rosMap.info.height+(e.rosMap.info.origin.position.y-e.pose.PoseY/1e3)/e.rosMap.info.resolution)*e.mapScale,z:0},orientation:{x:0,y:0,z:e.pose.PoseYaw/1e3}}))},moveAgvPosition:function(t,e){var n=t.find((function(t){return t.id===e.agvId}));null!=n&&(n.webPose.position.x+=e.movementX,n.webPose.position.y+=e.movementY)},changeAgvDirection:function(t,e){var n=t.find((function(t){return t.id===e.agvId}));if(null!=n){var i=Math.atan2(n.webPose.position.y-e.mouse.y,e.mouse.x-n.webPose.position.x);n.webPose.orientation.z=180*i/Math.PI}},setAgvDirection:function(t,e){var n=t.find((function(t){return t.id===e.agvId}));null!=n&&(n.webPose.orientation={x:e.x,y:e.y,z:e.z})},setAgvPosition:function(t,e){var n=t.find((function(t){return t.id===e.agvId}));null!=n&&(n.webPose.position={x:e.x,y:e.y,z:e.z})},setAgvStatus:function(t,e){var n=t.find((function(t){return t.id===e.agvId}));null!=n&&(n.statusDevices=e.status)}},_r=[{id:"8ee52be3-90d0-4ea9-8af5-b0c689a59030",rosMasterUri:"ws://192.168.10.100:9090",rosConntectionState:!1,sim1000Pose:{PoseX:0,PoseY:0,PoseYaw:0,Quality:0},webPose:{position:{x:0,y:0,z:0},orientation:{x:0,y:0,z:0}},size:{width:.53,height:.96},properties:{movementSpeed:{x:.3,y:0,z:0},rotateSpeed:{x:0,y:0,z:.6}},statusDevices:[],jobId:"cca29e49-d556-4c1a-af17-3f870b50ca06",jobStatus:"",taskId:null,taskStatus:"",actionId:null,actionStatus:""}],Vr={},Wr={namespaced:!0,state:_r,getters:Vr,mutations:Ar,actions:Pr},Dr={dashboard:ar,navigation:lr,settings:pr,account:yr,agvMaps:jr,agvJobs:Tr,agvs:Wr},Lr={setProperty:function(t,e){ia.setDeepProperty(t,e.value,e.properties)},insertTaskBeforeToJob:function(t){this.commit("ros/jobs/insertTaskBeforeToJob",{jobId:t.navigation.selectedJobId,indexTask:t.navigation.selectedIndexTask,agvPosition:t.ros.agvs[t.navigation.selectedAgvId].webPose.position})},insertTaskAfterToJob:function(t){this.commit("ros/jobs/insertTaskAfterToJob",{jobId:t.navigation.selectedJobId,indexTask:t.navigation.selectedIndexTask})},removeSelectedTaskFromJob:function(t){this.commit("ros/jobs/removeTaskFromJob",{jobId:t.navigation.selectedJobId,index:t.navigation.selectedIndexTask})},remoceTaskFromSelectedJob:function(t,e){this.commit("ros/jobs/removeTaskFromJob",{jobId:t.navigation.selectedJobId,index:e.index})},setThetaEndOfSelectedTask:function(t,e){this.commit("ros/jobs/setThetaEndOfTask",{jobId:t.navigation.selectedJobId,index:t.navigation.selectedIndexTask,mouse:e.mouse})},moveSelectedAgv:function(t,e){this.commit("ros/agvs/chanegAgvPosition",{agvId:t.navigation.selectedAgvId,movementX:e.movementX,movementY:e.movementY})},changeSelectedAgvDirection:function(t,e){this.commit("ros/agvs/changeAgvDirection",{agvId:t.navigation.selectedAgvId,mouse:e.mouse})},moveSelectedAgvToCenterMap:function(t){var e=t.ros.maps[t.navigation.selectedMapId].webMap;this.commit("ros/agvs/setAgvPosition",{agvId:t.navigation.selectedAgvId,x:e.width/2,y:e.height/2})},setSelectedAgvPosition:function(t,e){this.commit("ros/agvs/setAgvPosition",{agvId:t.navigation.selectedAgvId,x:e.x,y:e.y})},setSelectedAgvDirection:function(t,e){this.commit("ros/agvs/setAgvDirection",{agvId:t.navigation.selectedAgvId,theta:e.theta})},addGoalToCar:function(t){var e={x:0,y:0,theta:0};if(0==t.ros.jobs[t.navigation.selectedJobId].tasks.length)e.x=t.ros.agvs[t.navigation.selectedAgvId].webPose.position.x,e.y=t.ros.agvs[t.navigation.selectedAgvId].webPose.position.y,e.theta=t.ros.agvs[t.navigation.selectedAgvId].webPose.orientation.theta;else{var n=t.ros.jobs[t.navigation.selectedJobId].tasks[t.ros.jobs[t.navigation.selectedJobId].tasks.length-1];e.x=n.position.x,e.y=n.position.y,e.theta=n.thetaEnd}var i={x:e.x+100*Math.cos(e.theta*Math.PI/180),y:e.y-100*Math.sin(e.theta*Math.PI/180)};this.commit("ros/jobs/pushTaskToJob",{jobId:t.navigation.selectedJobId,x:i.x,y:i.y})},setSelectedAgvStatus:function(t,e){this.commit("ros/agvs/setAgvStatus",{agvId:t.navigation.selectedAgvId,status:e})},updateActionsOfSelectedTask:function(t,e){this.commit("ros/jobs/updateActions",{jobId:t.navigation.selectedJobId,index:t.navigation.selectedIndexTask,actions:e.actions})}};i["default"].use(V["b"]);var Rr=new V["b"].Store({actions:Hc,getters:Jc,modules:Dr,mutations:Lr,state:Xc}),Yr=(n("5363"),n("f309"));i["default"].use(Yr["a"]);var Er=new Yr["a"]({}),Xr=n("2d7e"),Hr="6defbba5-0f1f-4b43-a32e-a24247bac7d8",Jr=new WeakMap,Br=new WeakMap,zr=new WeakMap,Zr=new WeakMap,$r=new WeakMap,Nr=new WeakMap,Ur=new WeakMap,Fr=new WeakMap,Gr=new WeakMap,qr=new WeakMap,Qr=function(){function t(e){var n=this;Object(rn["a"])(this,t),Jr.set(this,{writable:!0,value:null}),Br.set(this,{writable:!0,value:null}),zr.set(this,{writable:!0,value:null}),Zr.set(this,{writable:!0,value:null}),$r.set(this,{writable:!0,value:null}),Nr.set(this,{writable:!0,value:null}),Ur.set(this,{writable:!0,value:function(){Object(vn["a"])(n,Br,new hn.a.Ros({url:Object(un["a"])(n,zr)})),Object(un["a"])(n,Br).on("connection",Object(un["a"])(n,Fr)),Object(un["a"])(n,Br).on("close",Object(un["a"])(n,Gr)),Object(un["a"])(n,Br).on("error",(function(t){return console.log("AGVR error: ",t)}))}}),Fr.set(this,{writable:!0,value:function(){Object(vn["a"])(n,$r,new hn.a.Topic({ros:Object(un["a"])(n,Br),name:"/map",messageType:"nav_msgs/OccupancyGrid"})),Object(un["a"])(n,$r).subscribe(Object(un["a"])(n,qr)),Object(un["a"])(n,Zr).commit("agvMaps/setConnectionState",{id:Object(un["a"])(n,Jr),isConnected:!0})}}),Gr.set(this,{writable:!0,value:function(){null!=Object(un["a"])(n,$r)&&(Object(vn["a"])(n,$r,null),Object(un["a"])(n,Zr).commit("agvMaps/setConnectionState",{id:Object(un["a"])(n,Jr),isConnected:!0})),setTimeout(Object(un["a"])(n,Ur),3e3)}}),qr.set(this,{writable:!0,value:function(t){Object(un["a"])(n,Zr).commit("agvMaps/setRosMap",{id:Hr,map:t})}}),Object(vn["a"])(this,Jr,e),Object(vn["a"])(this,Zr,i["default"].prototype.$store),Object(vn["a"])(this,zr,Object(un["a"])(this,Zr).state.agvMaps.find((function(t){return t.id===Object(un["a"])(n,Jr)})).rosMasterUri),Object(un["a"])(this,Ur).call(this)}return Object(ln["a"])(t,[{key:"dispose",value:function(){Object(vn["a"])(this,$r,null)}}]),t}(),Kr=(n("96cf"),n("1da1")),tl=new WeakMap,el=new WeakMap,nl=new WeakMap,il=new WeakMap,al=new WeakMap,ol=new WeakMap,sl=function(){function t(e,n,a){Object(rn["a"])(this,t),tl.set(this,{writable:!0,value:null}),el.set(this,{writable:!0,value:null}),nl.set(this,{writable:!0,value:null}),il.set(this,{writable:!0,value:100}),al.set(this,{writable:!0,value:null}),ol.set(this,{writable:!0,value:null}),Number.isInteger(a)&&e instanceof hn.a.Ros&&(Object(vn["a"])(this,il,a),Object(vn["a"])(this,el,i["default"].prototype.$store),Object(vn["a"])(this,al,Object(un["a"])(this,el).state.agvs.find((function(t){return t.id===n}))),Object(vn["a"])(this,tl,new hn.a.Topic({ros:e,name:"/cmd_vel",messageType:"geometry_msgs/Twist"})))}return Object(ln["a"])(t,[{key:"pushTwist",value:function(t){var e=this;if(null!=t){var n=Object(un["a"])(this,al).properties;Object(vn["a"])(this,ol,{linear:{x:t.linear.x*n.movementSpeed.x,y:t.linear.y*n.movementSpeed.y,z:t.linear.z*n.movementSpeed.z},angular:{x:t.angular.x*n.rotateSpeed.x,y:t.angular.y*n.rotateSpeed.y,z:t.angular.z*n.rotateSpeed.z}}),null!=Object(un["a"])(this,tl)&&null!=Object(un["a"])(this,ol)&&(null!=Object(un["a"])(this,nl)&&clearInterval(Object(un["a"])(this,nl)),Object(un["a"])(this,tl).publish(new hn.a.Message(Object(un["a"])(this,ol))),0==Object(un["a"])(this,ol).linear.x&&0==Object(un["a"])(this,ol).angular.z||Object(vn["a"])(this,nl,setInterval((function(){null!=Object(un["a"])(e,tl)&&null!=Object(un["a"])(e,ol)&&Object(un["a"])(e,tl).publish(new hn.a.Message(Object(un["a"])(e,ol)))}),Object(un["a"])(this,il))))}}},{key:"dispose",value:function(){null!=Object(un["a"])(this,nl)&&clearInterval(Object(un["a"])(this,nl)),Object(vn["a"])(this,tl,null)}}]),t}(),cl=n("abaf"),rl=new WeakMap,ll=new WeakMap,ul=new WeakMap,vl=new WeakMap,dl=new WeakMap,hl=new WeakMap,pl=new WeakMap,gl=function(){function t(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{ros:null,store:null};Object(rn["a"])(this,t),rl.set(this,{writable:!0,value:null}),ll.set(this,{writable:!0,value:null}),ul.set(this,{writable:!0,value:null}),vl.set(this,{writable:!0,value:null}),dl.set(this,{writable:!0,value:function(t){var n=new hn.a.Topic({ros:Object(un["a"])(e,ul),name:"/move_base/status",messageType:"actionlib_msgs/GoalStatusArray"});n.subscribe((function(i){if(Array.isArray(i.status_list)){var a=i.status_list.find((function(e){return e.goal_id&&e.goal_id.id==t}));if(null!=a&&a.status>0)switch(n.unsubscribe(),a.status){case 1:Object(un["a"])(e,hl).call(e,t);break;case 3:Object(un["a"])(e,pl).call(e,a.text);break;default:console.log(a),Object(un["a"])(e,rl).call(e,{group:"ros",type:"warn",title:"Move status",text:a.text});break}}}))}}),hl.set(this,{writable:!0,value:function(t){console.log("onMoveGoalActive");var n=new hn.a.Topic({ros:Object(un["a"])(e,ul),name:"/move_base/result",messageType:"move_base_msgs/MoveBaseActionResult"});n.subscribe((function(i){i.status.goal_id.id==t&&(n.unsubscribe(),3===i.status.status?Object(un["a"])(e,pl).call(e,i.status.text):(console.log(i.status),Object(un["a"])(e,rl).call(e,{group:"ros",type:"warn",title:"Move status",text:i.status.text})))}))}}),pl.set(this,{writable:!0,value:function(){var t=Object(Kr["a"])(regeneratorRuntime.mark((function t(n){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:console.log("moveGoalSuccess"),Object(un["a"])(e,rl).call(e,{group:"ros",type:"success",title:"Move status",text:n}),Object(un["a"])(e,vl).release();case 3:case"end":return t.stop()}}),t)})));function n(e){return t.apply(this,arguments)}return n}()}),n.ros instanceof hn.a.Ros&&(Object(vn["a"])(this,vl,new cl["a"]),Object(vn["a"])(this,ul,n.ros),Object(vn["a"])(this,rl,i["default"].prototype.$notify),Object(vn["a"])(this,ll,new hn.a.Topic({ros:Object(un["a"])(this,ul),name:"/move_base_simple/goal",messageType:"geometry_msgs/PoseStamped"})))}return Object(ln["a"])(t,[{key:"pushGoal",value:function(){var t=Object(Kr["a"])(regeneratorRuntime.mark((function t(e){var n,i,a,o,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(null!=Object(un["a"])(this,ll)&&null!=e){t.next=2;break}return t.abrupt("return");case 2:return n=Date.now(),i=Math.floor(n/1e3),a=n%1e3*1e6,o="goal-webap-".concat(i,".").concat(a),s={header:{seq:0,stamp:{secs:i,nsecs:a},frame_id:"map"},pose:e},Object(un["a"])(this,ll).publish(new hn.a.Message(s)),Object(un["a"])(this,dl).call(this,o),t.next=11,Object(un["a"])(this,vl).acquire();case 11:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()},{key:"dispose",value:function(){Object(vn["a"])(this,ll,null)}}]),t}(),ml=new WeakMap,fl=new WeakMap,bl=function(){function t(e){Object(rn["a"])(this,t),ml.set(this,{writable:!0,value:null}),fl.set(this,{writable:!0,value:null}),e instanceof hn.a.Ros&&(Object(vn["a"])(this,fl,i["default"].prototype.$store),Object(vn["a"])(this,ml,new hn.a.Topic({ros:e,name:"/initialpose",messageType:"geometry_msgs/PoseWithCovarianceStamped"})))}return Object(ln["a"])(t,[{key:"initialize",value:function(){if(null!=Object(un["a"])(this,ml)){var t=Object(un["a"])(this,fl).state.ros.agvs[Object(un["a"])(this,fl).state.navigation.selectedAgvId].webPose,e=Object(un["a"])(this,fl).state.ros.maps[Object(un["a"])(this,fl).state.navigation.selectedMapId],n={position:{x:e.rosMap.info.origin.position.x+t.position.x*e.rosMap.info.resolution/e.webMap.scale,y:e.rosMap.info.origin.position.y-(t.position.y/e.webMap.scale-e.rosMap.info.height)*e.rosMap.info.resolution,z:0},orientation:Vn.globalThetaToQuaternion(t.orientation.theta*Math.PI/180)},i={header:{seq:0,stamp:0,frame_id:"map"},pose:{pose:n,covariance:[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}};Object(un["a"])(this,ml).publish(new hn.a.Message(i))}}},{key:"dispose",value:function(){Object(vn["a"])(this,ml,null)}}]),t}(),yl=new WeakMap,kl=new WeakMap,wl=new WeakMap,xl=new WeakMap,Ml=function(){function t(e,n){var a=this;Object(rn["a"])(this,t),yl.set(this,{writable:!0,value:null}),kl.set(this,{writable:!0,value:null}),wl.set(this,{writable:!0,value:null}),xl.set(this,{writable:!0,value:function(t){Object(un["a"])(a,yl).dispatch("agvs/setAgvStatus",{agvId:Object(un["a"])(a,wl),status:t.status})}}),e instanceof hn.a.Ros&&(Object(vn["a"])(this,wl,n),Object(vn["a"])(this,yl,i["default"].prototype.$store),Object(vn["a"])(this,kl,new hn.a.Topic({ros:e,name:"/diagnostics_agg",messageType:"diagnostic_msgs/DiagnosticArray"})),Object(un["a"])(this,kl).subscribe(Object(un["a"])(this,xl)))}return Object(ln["a"])(t,[{key:"dispose",value:function(){Object(vn["a"])(this,kl,null)}}]),t}(),jl=new WeakMap,Sl=new WeakMap,Il=new WeakMap,Cl=new WeakMap,Ol=new WeakMap,Tl=new WeakMap,Pl=new WeakMap,Al=function(){function t(e,n,a){var o=this;Object(rn["a"])(this,t),jl.set(this,{writable:!0,value:null}),Sl.set(this,{writable:!0,value:1}),Il.set(this,{writable:!0,value:null}),Cl.set(this,{writable:!0,value:null}),Ol.set(this,{writable:!0,value:null}),Tl.set(this,{writable:!0,value:null}),Pl.set(this,{writable:!0,value:function(t){Object(un["a"])(o,Ol).state.navigation.subscribePose&&Object(un["a"])(o,Ol).commit("agvs/setSim1000Pose",{pose:t.telegram_payload,agvId:Object(un["a"])(o,jl),rosMap:Object(un["a"])(o,Cl).rosMap,mapScale:Object(un["a"])(o,Cl).webMap.scale})}}),e instanceof hn.a.Ros&&(Object(vn["a"])(this,Ol,i["default"].prototype.$store),Object(vn["a"])(this,jl,n),Object(vn["a"])(this,Cl,Object(un["a"])(this,Ol).state.agvMaps.find((function(t){return t.id===a}))),Object(vn["a"])(this,Tl,new hn.a.Topic({ros:e,name:"/sick_lidar_localization/driver/result_telegrams",messageType:"sick_lidar_localization/SickLocResultPortTelegramMsg"})),Object(un["a"])(this,Tl).subscribe(Object(un["a"])(this,Pl)))}return Object(ln["a"])(t,[{key:"dispose",value:function(){null!=Object(un["a"])(this,Tl)&&(Object(un["a"])(this,Tl).unsubscribe(),Object(vn["a"])(this,Tl,null))}}]),t}(),_l=new WeakMap,Vl=new WeakMap,Wl=new WeakMap,Dl=new WeakMap,Ll=new WeakMap,Rl=new WeakMap,Yl=new WeakMap,El=new WeakMap,Xl=new WeakMap,Hl=new WeakMap,Jl=new WeakMap,Bl=new WeakMap,zl=new WeakMap,Zl=new WeakMap,$l=new WeakMap,Nl=new WeakMap,Ul=function(){function t(e,n){var a=this;Object(rn["a"])(this,t),_l.set(this,{writable:!0,value:null}),Vl.set(this,{writable:!0,value:null}),Wl.set(this,{writable:!0,value:null}),Dl.set(this,{writable:!0,value:null}),Ll.set(this,{writable:!0,value:null}),Rl.set(this,{writable:!0,value:null}),Yl.set(this,{writable:!0,value:null}),El.set(this,{writable:!0,value:null}),Xl.set(this,{writable:!0,value:null}),Hl.set(this,{writable:!0,value:null}),Jl.set(this,{writable:!0,value:null}),Bl.set(this,{writable:!0,value:null}),zl.set(this,{writable:!0,value:null}),Zl.set(this,{writable:!0,value:function(){Object(vn["a"])(a,Ll,new hn.a.Ros({url:Object(un["a"])(a,Rl)})),Object(un["a"])(a,Ll).on("connection",Object(un["a"])(a,$l)),Object(un["a"])(a,Ll).on("close",Object(un["a"])(a,Nl)),Object(un["a"])(a,Ll).on("error",(function(t){return console.log("AGVR error: ",t)}))}}),$l.set(this,{writable:!0,value:function(){Object(vn["a"])(a,El,new sl(Object(un["a"])(a,Ll),Object(un["a"])(a,_l),100)),Object(vn["a"])(a,Xl,new gl({ros:Object(un["a"])(a,Ll)})),Object(vn["a"])(a,Hl,new bl(Object(un["a"])(a,Ll),Object(un["a"])(a,_l))),Object(vn["a"])(a,Jl,new Ml(Object(un["a"])(a,Ll))),Object(vn["a"])(a,Bl,new mn(Object(un["a"])(a,Ll))),Object(vn["a"])(a,zl,new Al(Object(un["a"])(a,Ll),Object(un["a"])(a,_l),Object(un["a"])(a,Wl))),Object(un["a"])(a,Yl).commit("agvs/setConnectionState",{agvId:Object(un["a"])(a,_l),isConnected:!0})}}),Nl.set(this,{writable:!0,value:function(){null!=Object(un["a"])(a,El)&&(Object(un["a"])(a,El).dispose(),Object(vn["a"])(a,El,null)),null!=Object(un["a"])(a,Xl)&&(Object(un["a"])(a,Xl).dispose(),Object(vn["a"])(a,Xl,null)),null!=Object(un["a"])(a,Hl)&&(Object(un["a"])(a,Hl).dispose(),Object(vn["a"])(a,Hl,null)),null!=Object(un["a"])(a,Jl)&&(Object(un["a"])(a,Jl).dispose(),Object(vn["a"])(a,Jl,null)),null!=Object(un["a"])(a,Bl)&&(Object(un["a"])(a,Bl).dispose(),Object(vn["a"])(a,Bl,null)),null!=Object(un["a"])(a,zl)&&(Object(un["a"])(a,zl).dispose(),Object(vn["a"])(a,zl,null)),Object(un["a"])(a,Yl).commit("agvs/setConnectionState",{agvId:Object(un["a"])(a,_l),isConnected:!1}),setTimeout(Object(un["a"])(a,Zl),3e3)}}),Object(vn["a"])(this,_l,e),Object(vn["a"])(this,Wl,n),Object(vn["a"])(this,Yl,i["default"].prototype.$store),Object(vn["a"])(this,Dl,Object(un["a"])(this,Yl).state.agvMaps.find((function(t){return t.id===n}))),Object(vn["a"])(this,Vl,Object(un["a"])(this,Yl).state.agvs.find((function(t){return t.id===Object(un["a"])(a,_l)}))),Object(vn["a"])(this,Rl,Object(un["a"])(this,Vl).rosMasterUri),Object(un["a"])(this,Zl).call(this)}return Object(ln["a"])(t,[{key:"pushCmdvel",value:function(t){null!=Object(un["a"])(this,El)&&Object(un["a"])(this,El).pushTwist(t)}},{key:"pushMoveGoal",value:function(t){null!=Object(un["a"])(this,Xl)&&Object(un["a"])(this,Xl).pushGoal(t)}},{key:"initializePose",value:function(){null!=Object(un["a"])(this,Hl)&&Object(un["a"])(this,Hl).initialize()}},{key:"pushAction",value:function(t){null!=Object(un["a"])(this,Bl)&&Object(un["a"])(this,Bl).pushAction(t)}},{key:"runJob",value:function(){var t=Object(Kr["a"])(regeneratorRuntime.mark((function t(){var e,n,i,a,o,s,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e=Object(un["a"])(this,Vl).jobId,n=Object(un["a"])(this,Yl).state.agvJobs.find((function(t){return t.id===e})),null!=n&&0!=n.tasks.length){t.next=4;break}return t.abrupt("return");case 4:i=Object(un["a"])(this,Dl).webMap.scale,a=Object(un["a"])(this,Dl).rosMap.info,o=0;case 7:if(!(o<n.tasks.length)){t.next=16;break}return s=n.tasks[o],c={orientation:Vn.globalThetaToQuaternion(s.thetaEnd*Math.PI/180),position:{x:a.origin.position.x+s.position.x*a.resolution/i,y:a.origin.position.y-(s.position.y/i-a.height)*a.resolution,z:0}},t.next=12,Object(un["a"])(this,Xl).pushGoal(c);case 12:return t.abrupt("break",16);case 13:o++,t.next=7;break;case 16:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}()}]),t}(),Fl=new WeakMap,Gl=function t(e){Object(rn["a"])(this,t),Fl.set(this,{writable:!0,value:null}),Object(sn["a"])(this,"robots",{});var n=i["default"].prototype.$store.state.agvMaps.find((function(t){return t.id===e})).agvIds;Object(vn["a"])(this,Fl,new Qr(e));for(var a=0;a<n.length;a++)this.robots[n[a]]=new Ul(n[a],e)},ql=new WeakMap,Ql=new WeakMap,Kl=function t(e){Object(rn["a"])(this,t),ql.set(this,{writable:!0,value:null}),Ql.set(this,{writable:!0,value:null}),Object(vn["a"])(this,ql,e.store),Object(un["a"])(this,ql).dispatch("account/setToken",localStorage.getItem("agvr-account-token")),Object(vn["a"])(this,Ql,Object(un["a"])(this,ql).state.account.token)},tu={install:function(t,e){t.prototype.$agvr=new Gl(e);var n=t.prototype.$store;function i(){n.dispatch("navigation/changeWindowSize",{width:window.innerWidth,height:window.innerHeight-96})}function a(){n.state.navigation.taskMenuContext.isShow||n.state.navigation.agvMenuContext.isShow||n.state.navigation.agvInitPoseMenuContext.isShow||(n.dispatch("navigation/enableMapPanZoom"),n.dispatch("navigation/selectedNone"))}function o(t){switch(t.key){case"Delete":n.dispatch("agvJobs/removeTaskFromJob",{jobId:n.state.navigation.jobId,taskId:n.state.navigation.taskId});break}}window.addEventListener("mouseup",a),window.addEventListener("touchend",a),window.addEventListener("keydown",o),window.addEventListener("resize",i),i()}},eu={install:function(t,e){t.prototype.$agvrAccount=new Kl(e)}},nu=n("ee98"),iu=n.n(nu);n("5aea");i["default"].config.productionTip=!1,i["default"].prototype.$store=Rr,i["default"].use(Xr["a"]),i["default"].use(cn["a"]),i["default"].use(iu.a),i["default"].use(tu,"6defbba5-0f1f-4b43-a32e-a24247bac7d8"),i["default"].use(eu,{store:Rr}),new i["default"]({router:Ec,store:Rr,vuetify:Er,render:function(t){return t(u)}}).$mount("#app")},5739:function(t,e,n){"use strict";var i=n("1e1e"),a=n.n(i);a.a},5831:function(t,e,n){"use strict";var i=n("bc86"),a=n.n(i);a.a},"5aea":function(t,e,n){},"69fa":function(t,e,n){t.exports=n.p+"img/2.84411cc8.jpg"},7775:function(t,e,n){},"798d":function(t,e,n){},"7a39":function(t,e,n){},8003:function(t,e,n){},"8a7f":function(t,e,n){"use strict";var i=n("a413"),a=n.n(i);a.a},"9e2b":function(t,e,n){},a413:function(t,e,n){},a46b:function(t,e,n){"use strict";var i=n("e946"),a=n.n(i);a.a},a47d:function(t,e,n){},a47d8:function(t,e,n){"use strict";var i=n("7a39"),a=n.n(i);a.a},a598:function(t,e,n){t.exports=n.p+"img/4.b9796597.jpg"},a9bd:function(t,e,n){"use strict";var i=n("c5b1"),a=n.n(i);a.a},b228:function(t,e,n){"use strict";var i=n("7775"),a=n.n(i);a.a},b4a7:function(t,e,n){"use strict";var i=n("04c0"),a=n.n(i);a.a},b931:function(t,e,n){},bc86:function(t,e,n){},c5b1:function(t,e,n){},c959:function(t,e,n){t.exports=n.p+"img/3.6a8bcd69.jpg"},ccb0:function(t,e,n){"use strict";var i=n("cd3d"),a=n.n(i);a.a},cd3d:function(t,e,n){},d057:function(t,e,n){"use strict";var i=n("b931"),a=n.n(i);a.a},d678:function(t,e,n){"use strict";var i=n("9e2b"),a=n.n(i);a.a},d95c:function(t,e,n){},e946:function(t,e,n){}});
//# sourceMappingURL=app.da7ee00a.js.map